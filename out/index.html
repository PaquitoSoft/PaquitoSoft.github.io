<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>PaquitoSoft&#x27;s corner</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/fca08b764e01d142.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fca08b764e01d142.css" data-n-g=""/><link rel="preload" href="/_next/static/css/65f3c5ddac3c3046.css" as="style"/><link rel="stylesheet" href="/_next/static/css/65f3c5ddac3c3046.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-f6f8e789435065da.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-59f1ed9830ced99b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-12e47b2d3cbfdb5e.js" defer=""></script><script src="/_next/static/chunks/834-1fce47b417d9f245.js" defer=""></script><script src="/_next/static/chunks/pages/index-79276915cb1b953d.js" defer=""></script><script src="/_next/static/Dhh1eIxwrKki7CqZexiwV/_buildManifest.js" defer=""></script><script src="/_next/static/Dhh1eIxwrKki7CqZexiwV/_ssgManifest.js" defer=""></script><script src="/_next/static/Dhh1eIxwrKki7CqZexiwV/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="header_header__U_Kza"><a class="title-link_titleLink__5zxWi header_title__DvyTk" href="/"><h2>Paquitosoft&#x27;s corner</h2></a></header><main class="container main-content"><div class="grid"><section><div><div class="Home_postsList__pQ2cq"><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-the-final-touch"><h3>Ractive.js tutorial - The final touch (6 of 6)</h3></a></header><div><span><p>(<em>Previous step: <a href="/post/ractive-js-tutorial-managing-users-notes">Managing user's notes</a></em>)</p>
<p>There are some little things we should improve in our application:</p>
<ul>
<li><a href="#home-flickering">Home flickering</a></li>
<li><a href="#show-errors">Show errors</a></li>
<li><a href="#cache-ajax">Cache ajax requests</a></li>
</ul>
<h2>Home flickering</h2>
<p>Right now, if you reload the page with a user page URL in the browser, you first see the home page and then you're redirected to the user page.
When we load the application and the router (<a href="https://github.com/visionmedia/page.js">PageJS</a>) gets initialized, it checks the URL and invokes the corresponding route handler (you can disable this behaviour if you want to by using the <a href="https://github.com/visionmedia/page.js#pageoptions"><em>dispatch</em> attribute</a>).
As we have configured the default view to be 'HomePage' in our <em>App</em> instance, it will get loaded before the router does its magic.</p>
<p>My solution for this is to create an empty view in our <em>App</em> and set it to be the default view, so we won't see any sub-view until the router invokes the right route handler and the right view is promoted to be shown.</p>
</span><a href="/post/ractive-js-tutorial-the-final-touch">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->02/08/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-managing-users-notes"><h3>Ractive.js tutorial - Managing user&#x27;s notes (5 of 6)</h3></a></header><div><span><p>(<em>Previous step: <a href="/post/ractive-js-tutorial-loading-user-info">Loading user info</a></em>)</p>
<p>Now we want to add to our little application the ability to create and delete notes for the users we can already see.
We will have a collection of notes for every user.</p>
<p>We need somewhere to store that notes and, for this tutorial, we'll use <a href="https://www.firebase.com/">Firebase</a> free plan service.
If you don't have an account, go and create one. Once you have it, create a new APP from your account page.
Now that you have your APP created, take note of its URL, as we'll be using it to integrate our application using <a href="https://www.firebase.com/docs/rest/quickstart.html">Firebase REST API</a>.
The URL should be something like this: https://ps-github-saver.firebaseio.com/.</p>
<p>First of all, we're going to populate our notes component, as right now it's empty.
We could just put all the code in the <em>notes-section</em> component, but for the sake of modularity (it would also help with the testing), we will have another two components:</p>
<ul>
<li>add-note: a little component to handle notes creation.</li>
<li>notes-list: a little component to show current notes and allow removing them.</li>
</ul>
</span><a href="/post/ractive-js-tutorial-managing-users-notes">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->02/08/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-loading-user-info"><h3>Ractive.js tutorial - Loading user info (4 of 6)</h3></a></header><div><span><p>(<em>Previous step</em>: <a href="/post/ractive-js-tutorial-routing">Routing</a>)</p>
<p>Rigth now our page shows nothing but some labels.
The next step is to allow our users to search for a GitHub user and, if it's found, show his info in the specific page.</p>
<p>We will be requesting data to the <a href="https://developer.github.com/v3/">GitHub REST API</a>.
These are the endpoints we'll be hitting:</p>
<ul>
<li>https://api.github.com/users/{username}: Get user main info</li>
<li>https://api.github.com/users/{username}/repos: Get user's repositories data</li>
</ul>
<h2>Polyfills</h2>
<p>To implement third party integration, we will be usign two new <em>ES2015</em> APIs which are not already arrived to all browsers, so we need to include some polyfills in our application for them: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>.</p>
<p>We will need to update our <strong>webpack</strong> configuration to include in our JS bundle these polyfills.</p>
<p>First, we need to install the polyfills and a couple of <em>webpack</em> plugins:</p>
<pre><code>$ npm install es6-promise whatwg-fetch --save
$ npm install imports-loader exports-loader --save-dev
</code></pre>
</span><a href="/post/ractive-js-tutorial-loading-user-info">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->01/08/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-routing"><h3>Ractive.js tutorial - Routing (3 of 6)</h3></a></header><div><span><p>(<em>Previous step</em>: <a href="/post/ractive-js-tutorial-creating-the-barebones">Creating the barebones</a>)</p>
<p><em>Ractive</em> does not have its own <a href="http://docs.ractivejs.org/latest/routing">routing system</a> becouse it is a library, not a framework, and routing is not part of its goal.
In the link above you can see they recommend:</p>
<ul>
<li><a href="http://backbonejs.org/#Router">Backbone.Router</a></li>
<li><a href="https://visionmedia.github.io/page.js/">PageJS</a></li>
</ul>
<p>There is also a Ractive specific router built by Martin Kolarik you can check:</p>
<ul>
<li><a href="https://github.com/MartinKolarik/ractive-route">Ractive-route</a></li>
</ul>
<p>As I already have some experience with <em>PageJS</em> I will be using that library for implementing a custom made routing subsystem.</p>
</span><a href="/post/ractive-js-tutorial-routing">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->01/08/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-creating-the-barebones"><h3>Ractive.js tutorial - Creating the barebones (2 of 6)</h3></a></header><div><span><p>(<em>Previous step</em>: <a href="/post/ractive-js-tutorial-setting-up-your-environment/">Setting up your environment</a>)</p>
<p>Ok, so now that you have all ready to fly, let's check what we want to do.</p>
<p>The goal is to build a simple app that let us view <a href="https://github.com/">GitHub</a> user's information and, also, to manage our own message notes for every user.
We will have a common layout with a static section (the one where you can search for users) and two subviews, having each one a different URL:</p>
<ul>
<li>Home page: will only contain a welcome message</li>
<li>User profile page: will contain three sections for every user info group</li>
</ul>
</span><a href="/post/ractive-js-tutorial-creating-the-barebones">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->28/07/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/ractive-js-tutorial-setting-up-your-environment"><h3>Ractive.js tutorial - Setting up your environment (1 of 6)</h3></a></header><div><span><p>(<em>Previous step: <a href="/post/create-a-ractive-application-tutorial">Tutorial introduction</a></em>)</p>
<p>I'm glad you decided to get here and I hope I can get your attention all the way down to the end of this tutorial.</p>
<p>So, the first step is to set up your working environment with the tools you will use.
I assume you have <a href="https://nodejs.org/download/">NodeJS</a> and NPM installed in your system. If not, please, follow the previous link and come back once you're ready.</p>
<p>Now, you need to create a new empty folder and initialize your project with <em>npm</em>:</p>
<pre><code class="language-language">$ mkdir notetaker-ractive
$ cd notetaker-ractive
$ npm init
</code></pre>
<p><em>NPM</em> will ask you some questions. You don't need to type anything and just press <em>Enter</em> for every question.
This command has created a new file (<em>package.json</em>) in your folder.
Now we need to install the basic packages:</p>
<ul>
<li><a href="http://webpack.github.io/">Webpack</a>: will help us to bundle all our JS code and to use <em>ES2015</em> import system.</li>
<li><a href="https://babeljs.io/">Babel</a>: will help us to use new <em>ES2015</em> features by transpiling them to <em>ES5</em> compatible code.</li>
<li><a href="https://github.com/cloudhead/node-static">node-static</a>: will serve our files (static server)</li>
</ul>
<p>You can use this command:</p>
<pre><code>$ npm i webpack babel-core babel-loader node-static --save-dev
</code></pre>
<p><strong>UPDATE (24-02-2016)</strong>:
<em>The new version of Babel (v6) requires an extra dependency to be installed and configured. Please, if you're following this tutorial for the first time, also install <strong>babel-preset-es2015</strong> dependency</em>.</p>
</span><a href="/post/ractive-js-tutorial-setting-up-your-environment">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->26/07/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/create-a-ractive-application-tutorial"><h3>Create a Ractive.js application (0 of 6)</h3></a></header><div><span><p>I'm a big fan of javascript. I like it in the front-end and I love it in the back-end (thanks <a href="http://www.quora.com/Who-is-Ryan-Dahl">Ryan Dhal</a>).
Also I enjoy playing with new libraries and frameworks that pops up every day. It seems nowadays everybody creates a new one and, when the time comes for you to start a new project and select the right one, oh man! it's a tough time.</p>
<p>With the beggining of this year, I was in the position of starting a new big project and I spent some time deciding which libraries we would use in the front-end (no doubts on our back-end: <strong>NodeJS</strong> <em>FTW</em>).
It was then when I discovered <a href="http://www.ractivejs.org/">Ractive.JS</a>.</p>
<p>The more time I spent reading the <a href="http://docs.ractivejs.org/latest/get-started">docs</a> and playing with their interactive <a href="http://learn.ractivejs.org/hello-world/1/">demos</a>, the more surprised I was I didn't hear anything about this library before.
IMHO it's a very easy to learn and powerful tool for dealing with DOM automatic bindings, event handling, pub/sub stuff and so on.</p>
<p>I began working in a prototype of our project using this tool and I was also surprised about the speed yur can get in terms of development.
The way this library solves some common problems is very natural for me, it fits my mindset. And every time I needed to learn how to implement something, it was pretty straightforward to find out.</p>
</span><a href="/post/create-a-ractive-application-tutorial">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->26/07/2015</div></footer></article><article class="card_card__43_8m"><header class="card_title__ITk4U"><a class="title-link_titleLink__5zxWi " href="/post/consuming-ga-data-from-nodejs-express-app"><h3>Consuming GA data from NodeJS Express app</h3></a></header><div><span><p>I didn't have a great time trying to implement a <em>simple</em> feature involving Google Analytics in one of my projects (nodejs web application).</p>
<p>My humble requirement was to collect some data (events) I was pushing to Google Analytics in order to create a simple report for my users.
Since it isn't a critical report, my idea was to get the data once a day and cache it.</p>
<p>So, as simple as it seems, it has been a tough trip for me and I want to share the whole process with the community. I hope anyone trying to achive something similar gets to this article and find it helpful.</p>
<p>These are the main steps I had to take:</p>
<ul>
<li>Register an application in <a href="https://code.google.com/apis/console">Google API console center</a></li>
<li>Create a service account</li>
<li>Register the newly created service account generated email into the Google Analytics account I wanted to consume</li>
<li>Implement the authorization token request (create a <em>JWT</em>)</li>
<li>Implement the request to collect data from Google Analytics</li>
</ul>
</span><a href="/post/consuming-ga-data-from-nodejs-express-app">Read more...</a></div><footer class="card_footer__5rntJ"><div>Published: <!-- -->01/12/2013</div></footer></article></div></div></section><aside><article class="about-me_aboutMeContainer__tBCGw"><header class="about-me_title__My_yA">About me</header><div><img class="about-me_avatar__rCHR2" src="/images/gravatar.jpg" alt="Paquitosoft avatar" height="150" width="150"/></div><footer class="about-me_footer__Io_kX"><ul><li class="about-me_profileLink__b1Ipw"><a href="https://github.com/PaquitoSoft" target="_blank" rel="noreferrer"><svg class="" height="24" width="24" fill="inherit"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></svg></a></li><li class="about-me_profileLink__b1Ipw"><a href="https://twitter.com/telemaco82" target="_blank" rel="noreferrer"><svg class="" height="24" width="24" fill="inherit"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"></path></svg></a></li><li class="about-me_profileLink__b1Ipw"><a href="hhtps://www.linkedin.com/in/carlos-martínez-cortizas-81763b2b" target="_blank" rel="noreferrer"><svg class="" height="24" width="24" fill="inherit"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"></path></svg></a></li></ul></footer></article></aside></div></main><footer class="footer_footer__GaW5f">Developed using<a href="https://nextjs.org" target="_blank" rel="noreferrer">Next.js</a> and<a href="https://picocss.com/" target="_blank" rel="noreferrer">PicoCSS</a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"ractive-js-tutorial-the-final-touch","title":"Ractive.js tutorial - The final touch (6 of 6)","creationDate":"2015-08-02T18:32:00.629Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/ractive-js-tutorial-managing-users-notes\"\u003eManaging user's notes\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eThere are some little things we should improve in our application:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#home-flickering\"\u003eHome flickering\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#show-errors\"\u003eShow errors\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#cache-ajax\"\u003eCache ajax requests\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eHome flickering\u003c/h2\u003e\n\u003cp\u003eRight now, if you reload the page with a user page URL in the browser, you first see the home page and then you're redirected to the user page.\nWhen we load the application and the router (\u003ca href=\"https://github.com/visionmedia/page.js\"\u003ePageJS\u003c/a\u003e) gets initialized, it checks the URL and invokes the corresponding route handler (you can disable this behaviour if you want to by using the \u003ca href=\"https://github.com/visionmedia/page.js#pageoptions\"\u003e\u003cem\u003edispatch\u003c/em\u003e attribute\u003c/a\u003e).\nAs we have configured the default view to be 'HomePage' in our \u003cem\u003eApp\u003c/em\u003e instance, it will get loaded before the router does its magic.\u003c/p\u003e\n\u003cp\u003eMy solution for this is to create an empty view in our \u003cem\u003eApp\u003c/em\u003e and set it to be the default view, so we won't see any sub-view until the router invokes the right route handler and the right view is promoted to be shown.\u003c/p\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/ractive-js-tutorial-managing-users-notes\"\u003eManaging user's notes\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eThere are some little things we should improve in our application:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#home-flickering\"\u003eHome flickering\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#show-errors\"\u003eShow errors\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#cache-ajax\"\u003eCache ajax requests\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eHome flickering\u003c/h2\u003e\n\u003cp\u003eRight now, if you reload the page with a user page URL in the browser, you first see the home page and then you're redirected to the user page.\nWhen we load the application and the router (\u003ca href=\"https://github.com/visionmedia/page.js\"\u003ePageJS\u003c/a\u003e) gets initialized, it checks the URL and invokes the corresponding route handler (you can disable this behaviour if you want to by using the \u003ca href=\"https://github.com/visionmedia/page.js#pageoptions\"\u003e\u003cem\u003edispatch\u003c/em\u003e attribute\u003c/a\u003e).\nAs we have configured the default view to be 'HomePage' in our \u003cem\u003eApp\u003c/em\u003e instance, it will get loaded before the router does its magic.\u003c/p\u003e\n\u003cp\u003eMy solution for this is to create an empty view in our \u003cem\u003eApp\u003c/em\u003e and set it to be the default view, so we won't see any sub-view until the router invokes the right route handler and the right view is promoted to be shown.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e (\u003cem\u003einclude a default empty view\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\n\nimport * as RouterPlugin from './plugins/router';\nimport routesConfiguration from './config/routes';\n\nimport RouterComponent from './components/layout/router';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\nimport UserPageComponent from './components/user-page'\n\nlet App = new Ractive({\n\tel: '#app',\n\ttemplate: template,\n\tcomponents: {\n\t\tSearchUser: SearchUserComponent,\n\t\tRouter: RouterComponent,\n\t\tEmptyPage: Ractive.extend({ template: '' })\n\t},\n\tdata: {\n\t\tcomponentName: 'EmptyPage'\n\t},\n\toninit() {\n\t\tRouterPlugin.init(routesConfiguration, this.onNavigation.bind(this));\n\t\tconsole.log('App::oninit# Application initialized!');\n\t},\n\tonNavigation(error, navigationContext) {\n\t\tconsole.log('APP::onNavigation# Navigating to:', navigationContext.pageName, 'with context:', navigationContext);\n\n\t\tif (error) {\n\t\t\tconsole.warn('App::onNavigation# Error navigating:', error);\n\t\t} else {\n\t\t\tthis.set({\n\t\t\t\treq: {\n\t\t\t\t\tparams: navigationContext.params,\n\t\t\t\t\tbody: navigationContext.state\n\t\t\t\t},\n\t\t\t\tcomponentName: navigationContext.pageName\n\t\t\t});\n\t\t}\n\t}\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eShow errors\u003c/h2\u003e\n\u003cp\u003eRight now if you look for a user that doesn't exist in GitHub, you won't get notified. The error is only printed in the browser tools console.\nWe just need to add a little \u003cem\u003ehtml\u003c/em\u003e to our main application template and a little code to our \u003cem\u003eApp\u003c/em\u003e instance to show the message.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e (\u003cem\u003eadd error message markup\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n\t\t\t\u0026lt;SearchUser placeholder=\u0026quot;Type a GitHub username...\u0026quot; /\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\u0026lt;Router componentName=\u0026quot;{{componentName}}\u0026quot;/\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t{{#errorMsg}}\n\t\t\u0026lt;div class=\u0026quot;alert alert-danger alert-dismissible\u0026quot; style=\u0026quot;position: absolute; top: 80px; right: 10px;\u0026quot; role=\u0026quot;alert\u0026quot;\u0026gt;\n\t\t\t\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;close\u0026quot; aria-label=\u0026quot;Close\u0026quot;\u0026gt;\u0026lt;span aria-hidden=\u0026quot;true\u0026quot;\u0026gt;\u0026amp;times;\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\n\t\t\t\u0026lt;strong\u0026gt;Error:\u0026lt;/strong\u0026gt; {{errorMsg}}\n\t\t\u0026lt;/div\u0026gt;\n\t{{/errorMsg}}\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e (_add 'showAlert' function and use it from the routes handler)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\n\nimport * as RouterPlugin from './plugins/router';\nimport routesConfiguration from './config/routes';\n\nimport RouterComponent from './components/layout/router';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\nimport UserPageComponent from './components/user-page'\n\nlet App = new Ractive({\n\tel: '#app',\n\ttemplate: template,\n\tcomponents: {\n\t\tSearchUser: SearchUserComponent,\n\t\tRouter: RouterComponent,\n\t\tEmptyPage: Ractive.extend({ template: '' })\n\t},\n\tdata: {\n\t\tcomponentName: 'EmptyPage'\n\t},\n\toninit() {\n\t\tRouterPlugin.init(routesConfiguration, this.onNavigation.bind(this));\n\t\tconsole.log('App::oninit# Application initialized!');\n\t},\n\tonNavigation(error, navigationContext) {\n\t\tconsole.log('APP::onNavigation# Navigating to:', navigationContext.pageName, 'with context:', navigationContext);\n\n\t\tif (error) {\n\t\t\tconsole.warn('App::onNavigation# Error navigating:', error);\n\t\t\tthis.showAlert(error.displayMessage || error.message);\n\t\t} else {\n\t\t\tthis.set({\n\t\t\t\treq: {\n\t\t\t\t\tparams: navigationContext.params,\n\t\t\t\t\tbody: navigationContext.state\n\t\t\t\t},\n\t\t\t\tcomponentName: navigationContext.pageName\n\t\t\t});\n\t\t}\n\t},\n\tshowAlert(message) {\n\t\tthis.set('errorMsg', message);\n\t\tsetTimeout(() =\u0026gt; {\n\t\t\tthis.set('errorMsg', null);\n\t\t}, 2500);\n\t}\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eCache ajax requests\u003c/h2\u003e\n\u003cp\u003eThe users info we're getting from GitHub doesn't change very often and, also, GitHub has \u003ca href=\"https://developer.github.com/v3/#rate-limiting\"\u003esome limitations\u003c/a\u003e on unauthorized requests you can make per hour.\nIt would be great to cache that info in the broswer (for example: using \u003cem\u003elocalStorage\u003c/em\u003e) so we avoid those limiations and the application reponds faster when asking for the same user info several times.\nWe will use the great \u003ca href=\"https://github.com/pamelafox/lscache\"\u003elscache\u003c/a\u003e library so it handles \u003cem\u003elocalStorage\u003c/em\u003e management and it allows us to set TTLs (\u003cem\u003etime to live\u003c/em\u003e) on our stored values to get automatically invalidated.\u003c/p\u003e\n\u003cp\u003eOn the one hand, we need to specify which request we want to cache. In our user model, we set the GitHub requests to be cached for one hour.\u003c/p\u003e\n\u003cp\u003eFirst we need to install the dependecy:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm install lscache --save\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/models/user.js\u003c/strong\u003e (\u003cem\u003eset GitHub ajax request to be cached\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport * as ajax from '../plugins/ajax';\n\nconst GITHUB_BASE_URL = 'https://api.github.com';\nconst FIREBASE_BASE_URL = `https://ps-github-saver.firebaseio.com`;\n\nclass User {\n\t\n\tconstructor(profile, repos, notes) {\n\t\tthis.profile = profile;\n\t\tthis.repos = repos;\n\t\tthis.notes = notes || []; // Default parameters values are only valid for undefined ones\n\t}\n\n\taddNote(newNote) {\n\t\tthis.notes.push(newNote);\n\t\treturn ajax.putJson(`${FIREBASE_BASE_URL}/${this.profile.login.toLowerCase()}.json`, this.notes);\n\t}\n\n\tremoveNote(note) {\n\t\tvar index = this.notes.indexOf(note);\n\t\tif (index \u0026gt;= 0) {\n\t\t\t\tthis.notes.splice(index, 1);\n\t\t\treturn ajax.putJson(`${FIREBASE_BASE_URL}/${this.profile.login.toLowerCase()}.json`, this.notes);\n\t\t}\n\t}\n\n\tstatic findByName(username) {\n\t\tlet userProfileUrl = `${GITHUB_BASE_URL}/users/${username}`,\n\t\t\tuserReposUrl = `${GITHUB_BASE_URL}/users/${username}/repos`,\n\t\t\tuserNotesUrl = `${FIREBASE_BASE_URL}/${username.toLowerCase()}.json`;\n\n\t\tlet result = new Promise((resolve, reject) =\u0026gt; {\n\t\t\tPromise.all([\n\t\t\t\tajax.getJson(userProfileUrl, {cache: true, ttl: 60}), // TTL in minutes\n\t\t\t\tajax.getJson(userReposUrl, {cache: true, ttl: 60}), // TTL in minutes\n\t\t\t\tajax.getJson(userNotesUrl)\n\t\t\t])\n\t\t\t.then(values =\u0026gt; {\n\t\t\t\tresolve(new User(values[0], values[1], values[2]));\n\t\t\t})\n\t\t\t.catch(reject);\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default User;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we need to update our \u003cem\u003eajax\u003c/em\u003e plugin to use \u003cem\u003elscache\u003c/em\u003e library and deal with caching configuration:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/js/app/plugins/ajax.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport lscache from 'lscache';\n\nfunction checkResponseStatus(res) {\n\tif (res.status \u0026lt; 400) {\n\t\treturn res;\n\t} else {\n\t\tlet error = new Error(res.statusText);\n\t\terror.statusCode = res.status;\n\t\terror.response = res;\n\t\tthrow error;\n\t}\n}\n\nfunction parseJson(res) {\n\treturn new Promise((resolve) =\u0026gt; {\n\t\tres.json().then(data =\u0026gt; {\n\t\t\tresolve({\n\t\t\t\tjson: data,\n\t\t\t\turl: res.url\n\t\t\t});\n\t\t});\n\t});\n}\n\nfunction cacheResponse(shouldCache, ttl, key) {\n\treturn (data) =\u0026gt; {\n\t\tif (shouldCache) {\n\t\t\tconsole.log('Ajax::cacheResponse# Caching response with key:', key, 'for', ttl, 'minutes.');\n\t\t\tlscache.set(data.url, data.json, ttl); // Last parameter is TTL in minutes\n\t\t}\n\t\treturn data.json;\n\t}\n}\n\nexport function getJson(url, options = {cache: false}) {\n\tlet data = lscache.get(url);\n\tif (data) {\n\t\treturn Promise.resolve(data);\n\t} else {\n\t\treturn fetch(url)\n\t\t\t.then(checkResponseStatus)\n\t\t\t.then(parseJson)\n\t\t\t.then(cacheResponse(options.cache, options.ttl, url));\n\t}\n}\n\nexport function putJson(url, data) {\n\treturn fetch(url, {\n\t\tmethod: 'put',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t})\n\t\t.then(checkResponseStatus);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow you can check with your browser tools that, if you load several times the same user, only the first one will issue request to GitHub.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003eEnding\u003c/h2\u003e\n\u003cp\u003eFirst of all, I want to thank you for getting all the way of this long tutorial until the end.\nI hope you found it insteresting and that you have learned something new that will be useful in the future.\u003c/p\u003e\n\u003cp\u003eI decided to write this tutorial not only because I want to spread the word about \u003ca href=\"http://www.ractivejs.org/\"\u003eRactive.js\u003c/a\u003e (note that I'm not involved in the project at all; I'm only one of its users), but because in my carrer I have read many many tutorials that helped me to be a better developer and I wanted to give back the same to the community.\u003c/p\u003e\n\u003cp\u003eIf you liked this tutorial, please talk about it in your favorite social network or to your collegues, and you would make my day if you drop me a line by e-mail (paquitosoftware at gmail.com) or in Twitter (@telemaco82).\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"ractive-js-tutorial-managing-users-notes","title":"Ractive.js tutorial - Managing user's notes (5 of 6)","creationDate":"2015-08-02T11:03:31.081Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/ractive-js-tutorial-loading-user-info\"\u003eLoading user info\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eNow we want to add to our little application the ability to create and delete notes for the users we can already see.\nWe will have a collection of notes for every user.\u003c/p\u003e\n\u003cp\u003eWe need somewhere to store that notes and, for this tutorial, we'll use \u003ca href=\"https://www.firebase.com/\"\u003eFirebase\u003c/a\u003e free plan service.\nIf you don't have an account, go and create one. Once you have it, create a new APP from your account page.\nNow that you have your APP created, take note of its URL, as we'll be using it to integrate our application using \u003ca href=\"https://www.firebase.com/docs/rest/quickstart.html\"\u003eFirebase REST API\u003c/a\u003e.\nThe URL should be something like this: https://ps-github-saver.firebaseio.com/.\u003c/p\u003e\n\u003cp\u003eFirst of all, we're going to populate our notes component, as right now it's empty.\nWe could just put all the code in the \u003cem\u003enotes-section\u003c/em\u003e component, but for the sake of modularity (it would also help with the testing), we will have another two components:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eadd-note: a little component to handle notes creation.\u003c/li\u003e\n\u003cli\u003enotes-list: a little component to show current notes and allow removing them.\u003c/li\u003e\n\u003c/ul\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/ractive-js-tutorial-loading-user-info\"\u003eLoading user info\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eNow we want to add to our little application the ability to create and delete notes for the users we can already see.\nWe will have a collection of notes for every user.\u003c/p\u003e\n\u003cp\u003eWe need somewhere to store that notes and, for this tutorial, we'll use \u003ca href=\"https://www.firebase.com/\"\u003eFirebase\u003c/a\u003e free plan service.\nIf you don't have an account, go and create one. Once you have it, create a new APP from your account page.\nNow that you have your APP created, take note of its URL, as we'll be using it to integrate our application using \u003ca href=\"https://www.firebase.com/docs/rest/quickstart.html\"\u003eFirebase REST API\u003c/a\u003e.\nThe URL should be something like this: https://ps-github-saver.firebaseio.com/.\u003c/p\u003e\n\u003cp\u003eFirst of all, we're going to populate our notes component, as right now it's empty.\nWe could just put all the code in the \u003cem\u003enotes-section\u003c/em\u003e component, but for the sake of modularity (it would also help with the testing), we will have another two components:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eadd-note: a little component to handle notes creation.\u003c/li\u003e\n\u003cli\u003enotes-list: a little component to show current notes and allow removing them.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLet's go for the sub-components:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/add-note.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;form on-submit=\u0026quot;createNote\u0026quot;\u0026gt;\n\t\u0026lt;div class=\u0026quot;input-group\u0026quot;\u0026gt;\n\t\t\u0026lt;input type=\u0026quot;text\u0026quot; class=\u0026quot;form-control\u0026quot; value=\u0026quot;{{newNote}}\u0026quot; placeholder=\u0026quot;Add new note...\u0026quot; /\u0026gt;\n\t\t\u0026lt;span class=\u0026quot;input-group-btn\u0026quot;\u0026gt;\n\t\t\t\u0026lt;button class=\u0026quot;btn btn-default\u0026quot; type=\u0026quot;submit\u0026quot;\u0026gt; Add \u0026lt;/button\u0026gt;\n\t\t\u0026lt;/span\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/form\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/notes/add-note.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport User from '../../../models/user';\nimport Template from '../../../../views/user/notes/add-note.html';\n\nvar AddNote = Ractive.extend({\n\tisolated: true,\n\ttemplate: Template,\n\toninit: function() {\n\t\tthis.on('createNote', (rEvent) =\u0026gt; {\n\t\t\trEvent.original.preventDefault();\n\t\t\tthis.fire('AddUserNote', rEvent.context.newNote);\n\t\t\tthis.set('newNote', '');\n\t\t});\n\t},\n\tdata: {\n\t\tnewNote: ''\n\t}\n});\n\nexport default AddNote;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis component just shows an input with a button so we can type our note and proceed saving it.\nThe \u003cstrong\u003ecreateNote\u003c/strong\u003e proxy event just fires a custom event with the introduced note message.\nThis event will bubble up through all parent components so any of them (the right one) can handle it.\u003c/p\u003e\n\u003cp\u003eNow, the \u003cem\u003enotes-list\u003c/em\u003e component.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/notes/notes-list.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;ul class=\u0026quot;list-group\u0026quot;\u0026gt;\n\t{{#each notes}}\n\t\t\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;\n\t\t\t\u0026lt;span\u0026gt;{{.}}\u0026lt;/span\u0026gt;\n\t\t\t\u0026lt;span class=\u0026quot;pull-right\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;span class=\u0026quot;glyphicon glyphicon-remove\u0026quot; on-click=\u0026quot;deleteNote\u0026quot; style=\u0026quot;cursor: pointer;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\n\t\t\t\u0026lt;/span\u0026gt;\n\t\t\u0026lt;/li\u0026gt;\n\t{{/each}}\n\u0026lt;/ul\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/notes/notes-list.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../../views/user/notes/notes-list.html';\n\nvar NotesList = Ractive.extend({\n\tisolated: true,\n\ttemplate: Template,\n\toninit() {\n\t\tthis.on('deleteNote', (rEvent) =\u0026gt; {\n\t\t\t\tthis.fire('RemoveUserNote', rEvent.context);\n\t\t});\n\t}\n});\n\nexport default NotesList;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the \u003cstrong\u003edeleteNote\u003c/strong\u003e proxy event, we just fire a custom event with the message we want to delete.\u003c/p\u003e\n\u003cp\u003eNow we need to update our \u003cem\u003enotes-section\u003c/em\u003e component so it uses those new sub-components:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/notes-section.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div\u0026gt;\n\t\u0026lt;h3\u0026gt; Notes \u0026lt;/h3\u0026gt;\n\t\u0026lt;AddNote /\u0026gt;\n\t\u0026lt;br/\u0026gt;\n\t\u0026lt;NotesList notes=\u0026quot;{{notes}}\u0026quot; /\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote that we pass the notes list from the parent component to the \u003cem\u003enotes-list\u003c/em\u003e subcomponent.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/notes-section.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e'use strict';\n\nimport Ractive from 'ractive';\nimport AddNote from './notes/add-note';\nimport NotesList from './notes/notes-list';\nimport template from '../../views/user/notes-section.html';\n\nvar NotesSection = Ractive.extend({\n\tisolated: true,\n\ttemplate: template,\n\tcomponents: {\n\t\tAddNote: AddNote,\n\t\tNotesList: NotesList\n\t}\n});\n\nexport default NotesSection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe just need to update our user page view to pass the notes collection to this section:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user-page.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;row\u0026quot;\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;UserProfile profile=\u0026quot;{{user.profile}}\u0026quot; /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Repos repos=\u0026quot;{{user.repos}}\u0026quot; /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Notes notes=\u0026quot;{{user.notes}}\u0026quot; /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe have all the notes stuff set up, but it's not functional yet as no one is managing reading and saving data to \u003cem\u003eFirebase\u003c/em\u003e.\nI think reading should be done in the \u003cstrong\u003efindByUsername\u003c/strong\u003e function from the user model object, so when the user page gets loaded, we have all its needed information.\nOn the other hand, creating and removing notes should be done from the user page component through the user model object. The user page component is the component who knows which user we're diplaying, so it will be the one listening to sub-component custom events.\u003c/p\u003e\n\u003cp\u003eLet's begin by reading user's notes.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/models/user.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport * as ajax from '../plugins/ajax';\n\nconst GITHUB_BASE_URL = 'https://api.github.com';\nconst FIREBASE_BASE_URL = `https://ps-github-saver.firebaseio.com`;\n\nclass User {\n\t\n\tconstructor(profile, repos, notes) {\n\t\tthis.profile = profile;\n\t\tthis.repos = repos;\n\t\tthis.notes = notes || []; // Default parameters values are only valid for undefined ones\n\t}\n\n\tstatic findByName(username) {\n\t\tlet userProfileUrl = `${GITHUB_BASE_URL}/users/${username}`,\n\t\t\tuserReposUrl = `${GITHUB_BASE_URL}/users/${username}/repos`,\n\t\t\tuserNotesUrl = `${FIREBASE_BASE_URL}/${username.toLowerCase()}.json`;\n\n\t\tlet result = new Promise((resolve, reject) =\u0026gt; {\n\t\t\tPromise.all([\n\t\t\t\tajax.getJson(userProfileUrl),\n\t\t\t\tajax.getJson(userReposUrl),\n\t\t\t\tajax.getJson(userNotesUrl)\n\t\t\t])\n\t\t\t.then(values =\u0026gt; {\n\t\t\t\t\tresolve(new User(values[0], values[1], values[2]));\n\t\t\t})\n\t\t\t.catch(reject);\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default User;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe just need to declare the URL for the user's notes in our Firebase project and add another \u003cem\u003egetJson\u003c/em\u003e promise to our group.\u003c/p\u003e\n\u003cp\u003eNow we handle notes creation (in our user page component) so we can see anything in the notes list.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user-page.js\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../views/user-page.html';\nimport UserProfile from './user/profile-section';\nimport Repos from './user/repos-section';\nimport Notes from './user/notes-section';\n\nvar UserPage = Ractive.components.UserPage = Ractive.extend({\n\ttemplate: Template,\n\tcomponents: {\n\t\tUserProfile: UserProfile,\n\t\tRepos: Repos,\n\t\tNotes: Notes\n\t},\n\toninit() {\n\t\tthis.observe('req', (request) =\u0026gt; {\n\t\t\tthis.set('user', request.body.user);\n\t\t});\n\n\t\t// *.*, *.AddUserNote, AddNote.*, AddNote.AddUserNote\n\t\tthis.on('*.AddUserNote', (newNote) =\u0026gt; {\n\t\t\tconsole.log('UserPage::createNote# Adding new note to user:', this.get('user').profile.login);\n\t\t\tthis.get('user').addNote(newNote);\n\t\t});\n\t}\n});\nUserPage._name = 'UserPage';\n\nexport default UserPage;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe custom events fired from components get their names namespaced. The final event name is built beginning with the name of the component where it was generated, followed by a dot and the name you used when firing the event.\nWhen you register to events, you have the chance to use a wildcard both for the name of the component as well as the name of the event (see the comment above the event handler).\u003c/p\u003e\n\u003cp\u003eWe now need to implement the \u003cstrong\u003eaddNote\u003c/strong\u003e function in the user model.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/models/user.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport * as ajax from '../plugins/ajax';\n\nconst GITHUB_BASE_URL = 'https://api.github.com';\nconst FIREBASE_BASE_URL = `https://ps-github-saver.firebaseio.com`;\n\nclass User {\n\t\n\tconstructor(profile, repos, notes) {\n\t\tthis.profile = profile;\n\t\tthis.repos = repos;\n\t\tthis.notes = notes || []; // Default parameters values are only valid for undefined ones\n\t}\n\n\taddNote(newNote) {\n\t\tthis.notes.push(newNote);\n\t\treturn ajax.putJson(`${FIREBASE_BASE_URL}/${this.profile.login.toLowerCase()}.json`, this.notes);\n\t}\n\n\tstatic findByName(username) {\n\t\tlet userProfileUrl = `${GITHUB_BASE_URL}/users/${username}`,\n\t\t\tuserReposUrl = `${GITHUB_BASE_URL}/users/${username}/repos`,\n\t\t\tuserNotesUrl = `${FIREBASE_BASE_URL}/${username.toLowerCase()}.json`;\n\n\t\tlet result = new Promise((resolve, reject) =\u0026gt; {\n\t\t\tPromise.all([\n\t\t\t\tajax.getJson(userProfileUrl),\n\t\t\t\tajax.getJson(userReposUrl),\n\t\t\t\tajax.getJson(userNotesUrl)\n\t\t\t])\n\t\t\t.then(values =\u0026gt; {\n\t\t\t\tresolve(new User(values[0], values[1], values[2]));\n\t\t\t})\n\t\t\t.catch(reject);\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default User;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we're adding the new notes to the users note's list so it get updated inmediatly and Ractive will update the view to reflect this change before the note is actually persisted.\nThen, we call a new ajax pluging's function (\u003cem\u003eputJson\u003c/em\u003e) to save the note in Firebase.\u003c/p\u003e\n\u003cp\u003eMost of the time, save operation will work, so I prefer to not wait for the back-end response so the user feels our application is blazing fast.\nIn real world applications we would (for example) implement a mechanism so, if the operation fails, we warn the user and we undo the operation.\u003c/p\u003e\n\u003cp\u003eLet's add the \u003cstrong\u003eputJson\u003c/strong\u003e function to our ajax component:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/plugins/ajax.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003efunction checkResponseStatus(res) {\n\tif (res.status \u0026lt; 400) {\n\t\treturn res;\n\t} else {\n\t\tlet error = new Error(res.statusText);\n\t\terror.statusCode = res.status;\n\t\terror.response = res;\n\t\tthrow error;\n\t}\n}\n\nfunction parseJson(res) {\n\treturn res.json();\n}\n\nexport function getJson(url, options = {cache: false}) {\n\treturn fetch(url)\n\t\t.then(checkResponseStatus)\n\t\t.then(parseJson);\n}\n\nexport function putJson(url, data) {\n\treturn fetch(url, {\n\t\tmethod: 'put',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify(data)\n\t})\n\t.then(checkResponseStatus);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you reload the application in your browser right now, you should be able to save notes.\u003c/p\u003e\n\u003cp\u003eThe last step is to add notes removing functionality.\nWe will follow the same pattern: fire a custom event from the sub-component (\u003cem\u003enotes-list\u003c/em\u003e) and handle it from the user page through user model.\nWhen we created the \u003cem\u003enotes-list\u003c/em\u003e component, we already configured the view and the behavior to fire that event, so we just need to update the user page and the user model:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user-page.js\u003c/strong\u003e (\u003cem\u003eadd 'RemoveUserNote' event handler\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../views/user-page.html';\nimport UserProfile from './user/profile-section';\nimport Repos from './user/repos-section';\nimport Notes from './user/notes-section';\n\nvar UserPage = Ractive.components.UserPage = Ractive.extend({\n\ttemplate: Template,\n\tcomponents: {\n\t\tUserProfile: UserProfile,\n\t\tRepos: Repos,\n\t\tNotes: Notes\n\t},\n\toninit() {\n\t\tthis.observe('req', (request) =\u0026gt; {\n\t\t\tthis.set('user', request.body.user);\n\t\t});\n\n\t\t// *.*, *.AddUserNote, AddNote.*, AddNote.AddUserNote\n\t\tthis.on('*.AddUserNote', (newNote) =\u0026gt; {\n\t\t\tconsole.log('UserPage::createNote# Adding new note to user:', this.get('user').profile.login);\n\t\t\tthis.get('user').addNote(newNote);\n\t\t});\n\n\t\tthis.on('*.RemoveUserNote', (note) =\u0026gt; {\n\t\t\tthis.get('user').removeNote(note);\n\t\t});\n\t}\n});\nUserPage._name = 'UserPage';\n\nexport default UserPage;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/models/user.js\u003c/strong\u003e (\u003cem\u003eadd 'removeNote' function\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport * as ajax from '../plugins/ajax';\n\nconst GITHUB_BASE_URL = 'https://api.github.com';\nconst FIREBASE_BASE_URL = `https://ps-github-saver.firebaseio.com`;\n\nclass User {\n\t\n\tconstructor(profile, repos, notes) {\n\t\tthis.profile = profile;\n\t\tthis.repos = repos;\n\t\tthis.notes = notes || []; // Default parameters values are only valid for undefined ones\n\t}\n\n\taddNote(newNote) {\n\t\tthis.notes.push(newNote);\n\t\treturn ajax.putJson(`${FIREBASE_BASE_URL}/${this.profile.login.toLowerCase()}.json`, this.notes);\n\t}\n\n\tremoveNote(note) {\n\t\tvar index = this.notes.indexOf(note);\n\t\tif (index \u0026gt;= 0) {\n\t\t\tthis.notes.splice(index, 1);\n\t\t\treturn ajax.putJson(`${FIREBASE_BASE_URL}/${this.profile.login.toLowerCase()}.json`, this.notes);\n\t\t}\n\t}\n\n\tstatic findByName(username) {\n\t\tlet userProfileUrl = `${GITHUB_BASE_URL}/users/${username}`,\n\t\t\tuserReposUrl = `${GITHUB_BASE_URL}/users/${username}/repos`,\n\t\t\tuserNotesUrl = `${FIREBASE_BASE_URL}/${username.toLowerCase()}.json`;\n\n\t\tlet result = new Promise((resolve, reject) =\u0026gt; {\n\t\t\tPromise.all([\n\t\t\t\tajax.getJson(userProfileUrl),\n\t\t\t\tajax.getJson(userReposUrl),\n\t\t\t\tajax.getJson(userNotesUrl)\n\t\t\t])\n\t\t\t.then(values =\u0026gt; {\n\t\t\t\tresolve(new User(values[0], values[1], values[2]));\n\t\t\t})\n\t\t\t.catch(reject);\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default User;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo, this is it.\nYou have used some of the main parts of Ractive along the way, but it has much more than this to offer.\nI strongly recommend to (first) follow the \u003ca href=\"http://learn.ractivejs.org/hello-world/1/\"\u003eofficial tutorials\u003c/a\u003e and (second) to read its \u003ca href=\"http://docs.ractivejs.org/latest/get-started\"\u003edocumentation\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWe have some things we can improve with little effort in our application that we will accomplish in the last step of the tutorial.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePrevious post: \u003ca href=\"/post/ractive-js-tutorial-loading-user-info\"\u003eLoading user info\u003c/a\u003e\nNext post: \u003ca href=\"/post/ractive-js-tutorial-the-final-touch\"\u003eThe final touch\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"ractive-js-tutorial-loading-user-info","title":"Ractive.js tutorial - Loading user info (4 of 6)","creationDate":"2015-08-01T19:08:30.642Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-routing\"\u003eRouting\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eRigth now our page shows nothing but some labels.\nThe next step is to allow our users to search for a GitHub user and, if it's found, show his info in the specific page.\u003c/p\u003e\n\u003cp\u003eWe will be requesting data to the \u003ca href=\"https://developer.github.com/v3/\"\u003eGitHub REST API\u003c/a\u003e.\nThese are the endpoints we'll be hitting:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://api.github.com/users/{username}: Get user main info\u003c/li\u003e\n\u003cli\u003ehttps://api.github.com/users/{username}/repos: Get user's repositories data\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePolyfills\u003c/h2\u003e\n\u003cp\u003eTo implement third party integration, we will be usign two new \u003cem\u003eES2015\u003c/em\u003e APIs which are not already arrived to all browsers, so we need to include some polyfills in our application for them: \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\u003efetch\u003c/a\u003e and \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"\u003ePromise\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWe will need to update our \u003cstrong\u003ewebpack\u003c/strong\u003e configuration to include in our JS bundle these polyfills.\u003c/p\u003e\n\u003cp\u003eFirst, we need to install the polyfills and a couple of \u003cem\u003ewebpack\u003c/em\u003e plugins:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm install es6-promise whatwg-fetch --save\n$ npm install imports-loader exports-loader --save-dev\n\u003c/code\u003e\u003c/pre\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-routing\"\u003eRouting\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eRigth now our page shows nothing but some labels.\nThe next step is to allow our users to search for a GitHub user and, if it's found, show his info in the specific page.\u003c/p\u003e\n\u003cp\u003eWe will be requesting data to the \u003ca href=\"https://developer.github.com/v3/\"\u003eGitHub REST API\u003c/a\u003e.\nThese are the endpoints we'll be hitting:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://api.github.com/users/{username}: Get user main info\u003c/li\u003e\n\u003cli\u003ehttps://api.github.com/users/{username}/repos: Get user's repositories data\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePolyfills\u003c/h2\u003e\n\u003cp\u003eTo implement third party integration, we will be usign two new \u003cem\u003eES2015\u003c/em\u003e APIs which are not already arrived to all browsers, so we need to include some polyfills in our application for them: \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\u003efetch\u003c/a\u003e and \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"\u003ePromise\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWe will need to update our \u003cstrong\u003ewebpack\u003c/strong\u003e configuration to include in our JS bundle these polyfills.\u003c/p\u003e\n\u003cp\u003eFirst, we need to install the polyfills and a couple of \u003cem\u003ewebpack\u003c/em\u003e plugins:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm install es6-promise whatwg-fetch --save\n$ npm install imports-loader exports-loader --save-dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, we update the \u003cem\u003ewebpack\u003c/em\u003e configuration file:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar webpack = require('webpack');\n\nmodule.exports = {\n\tentry: './app/js/app.js',\n\toutput: {\n\t\tfilename: 'app/js/dist/bundle.js'\n\t},\n\tmodule: {\n\t\tloaders: [\n\t\t\t{\n\t\t\t\ttest: /\\\\.js$/,\n\t\t\t\texclude: /(node_modules|bower_components)/,\n\t\t\t\tloader: 'babel'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttest: /\\\\.html$/,\n\t\t\t\tloader: 'raw'\n\t\t\t}\n\t\t]\n\t},\n\t// This is to load polyfills (http://mts.io/2015/04/08/webpack-shims-polyfills/)\n\tplugins: [\n\t\tnew webpack.ProvidePlugin({\n\t\t\tfetch: 'imports?this=\u0026gt;global!exports?global.fetch!whatwg-fetch',\n\t\t\t'es6-promise': 'es6-promise'\n\t\t})\n\t]\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSearch user component\u003c/h2\u003e\n\u003cp\u003eBefore we make any request, we must update our \u003cem\u003eSearchUser\u003c/em\u003e component to handle username submission and navigate to user page.\nJust update its \u003cem\u003esearchUser\u003c/em\u003e \u003ca href=\"http://docs.ractivejs.org/latest/proxy-events\"\u003eproxy event\u003c/a\u003e to get the username introduced by our user and try to navigate to the corresponding URL.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/layout/search-user.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../../views/layout/search-user.html';\nimport * as router from '../../plugins/router';\n\nvar SearchGithub = Ractive.extend({\n\tisolated: true,\n\ttemplate: Template,\n\n\toninit() {\n\t\tthis.on('searchUser', (rEvent) =\u0026gt; {\n\t\t\trEvent.original.preventDefault();\n\t\t\trouter.navTo(`/user/${rEvent.context.query}`);\n\t\t\tthis.set('query', '');\n\t\t});\n\t},\n\n\tdata: {\n\t\t\tquery: ''\n\t}\n});\n\nexport default SearchGithub;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe've just imported the router plugin and configured the \u003cem\u003eserachUser\u003c/em\u003e handler to call plugin's navigation function passing the URL we want to visit (note the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings\"\u003estring interpolation\u003c/a\u003e to build the URL).\u003c/p\u003e\n\u003cp\u003eNow, when we type a username and submit the form, our router will call our '/user/:username' URL handler (defined in our \u003cem\u003e/app/js/config/routes.js\u003c/em\u003e file).\nWe need to update that handler to perform our action, in this case, load user's info and repos data.\u003c/p\u003e\n\u003ch2\u003eAjax plugin\u003c/h2\u003e\n\u003cp\u003eInstead of implement all the logic to fetch user related data in the route handler, we'll be using several objects to separete concerns.\nIn one hand, we'll have a plugin to deal with \u003cem\u003eAJAX\u003c/em\u003e request (we'll use the new, in progress, \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\u003efetch API\u003c/a\u003e). On the other hand we'll have a model object to represent a user so it will have all the logic related with users operations.\u003c/p\u003e\n\u003cp\u003eLet's first create the ajax plugin:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/plugins/ajax.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003efunction checkResponseStatus(res) {\n\tif (res.status \u0026lt; 400) {\n\t\treturn res;\n\t} else {\n\t\tlet error = new Error(res.statusText);\n\t\terror.statusCode = res.status;\n\t\terror.response = res;\n\t\tthrow error;\n\t}\n}\n\nfunction parseJson(res) {\n\treturn new Promise((resolve) =\u0026gt; {\n\t\tres.json().then(data =\u0026gt; {\n\t\t\tresolve({\n\t\t\t\tjson: data,\n\t\t\t\turl: res.url\n\t\t\t});\n\t\t});\n\t});\n}\n\nexport function getJson(url) {\n\treturn fetch(url)\n\t\t.then(checkResponseStatus)\n\t\t.then(parseJson);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, this file exports a \u003cem\u003egetJson\u003c/em\u003e function which allows to fetch JSON data and return a JS object.\u003c/p\u003e\n\u003cp\u003eThe \u003cem\u003efetch\u003c/em\u003e function returns a promise which will get a \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Response\"\u003eResponse\u003c/a\u003e object as response.\nWe chain that promise with another one which checks the response status and another one to extract the data from the json response.\nYou must remember something very important when using \u003cem\u003efetch\u003c/em\u003e function: if the endpoint responds with an error (for instance, a 4XX or 5XX response status code), the \u003cem\u003efetch\u003c/em\u003e function will not invoke the \u003cem\u003ereject\u003c/em\u003e part of the promise it creates. That's why we need to first check for the status code of the response, before parsing its body.\nPersonally, I don't like this behavior and I hope this could change before closing this API specification.\u003c/p\u003e\n\u003ch2\u003eUser model\u003c/h2\u003e\n\u003cp\u003eNext, we create our user \u003cem\u003emodel\u003c/em\u003e, where we encapsulate users state and behavior.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/models/user.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport * as ajax from '../plugins/ajax';\n\nconst GITHUB_BASE_URL = 'https://api.github.com';\n\nclass User {\n\t\n\tconstructor(profile, repos, notes) {\n\t\tthis.profile = profile;\n\t\tthis.repos = repos;\n\t\tthis.notes = notes || []; // Default parameters values are only valid for undefined ones\n\t}\n\n\tstatic findByName(username) {\n\t\tlet userProfileUrl = `${GITHUB_BASE_URL}/users/${username}`,\n\t\t\tuserReposUrl = `${GITHUB_BASE_URL}/users/${username}/repos`;\n\n\t\tlet result = new Promise((resolve, reject) =\u0026gt; {\n\t\t\t\tPromise.all([\n\t\t\t\t\tajax.getJson(userProfileUrl),\n\t\t\t\tajax.getJson(userReposUrl),\n\t\t\t])\n\t\t\t.then(values =\u0026gt; {\n\t\t\t\t\tresolve(new User(values[0], values[1]));\n\t\t\t})\n\t\t\t.catch(reject);\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default User;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eRoute handling\u003c/h2\u003e\n\u003cp\u003eThis is a \u003cem\u003eES2015\u003c/em\u003e class with its \u003cem\u003econstructor\u003c/em\u003e function that gets invoked when we create a new instance and a \u003cem\u003estatic\u003c/em\u003e function which allows to call it without creating a new instance.\nSince our \u003cem\u003eajax\u003c/em\u003e plugin uses the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\u003e\u003cem\u003efetch\u003c/em\u003e\u003c/a\u003e API and it returns promises, here we use the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\"\u003ePromise.all\u003c/a\u003e function which allows to group several promises and get notified when all of them have completed (\u003cem\u003eor when one of them has failed\u003c/em\u003e).\u003c/p\u003e\n\u003cp\u003eNow we need to update our routing configuration so that when the user page URL gets requested, we use this user model object to fetch needed data.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/config/routes.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e'use strict';\n\nimport router from '../plugins/router';\nimport HomePage from '../components/home-page';\nimport UserPage from '../components/user-page';\nimport UserModel from '../models/user';\n\nvar routes = new Map();\n\nroutes.set('/', (context, next) =\u0026gt; {\n\tnext(null, HomePage);\n});\n\nroutes.set('/user/:username', (context, next) =\u0026gt; {\n\tUserModel.findByName(context.params.username)\n\t.then((user) =\u0026gt; {\n\t\t\tnext(null, UserPage, {\n\t\t\t\tuser: user\n\t\t});\n\t})\n\t.catch((err) =\u0026gt; {\n\t\t\tnext(err);\n\t});\n});\n\nexport default routes;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe get the username from the context parameter and use it to call the user model \u003cem\u003efindByName\u003c/em\u003e function so we get user's instance model object.\nWe then call \u003cem\u003enext\u003c/em\u003e so the control gets to the \u003cem\u003eApp\u003c/em\u003e instance, which updates the \u003cem\u003ecomponentName\u003c/em\u003e (page to be shown) and the request data.\nJust to remember...\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e...\nonNavigation(error, navigationContext) {\n\t\tconsole.log('APP::onNavigation# Navigating to:', navigationContext.pageName, 'with context:', navigationContext);\n\n\t\tif (error) {\n\t\t\tconsole.warn('App::onNavigation# Error navigating:', error);\n\t\t} else {\n\t\t\tthis.set({\n\t\t\t\treq: {\n\t\t\t\t\tparams: navigationContext.params,\n\t\t\t\t\tbody: navigationContext.state\n\t\t\t\t},\n\t\t\t\tcomponentName: navigationContext.pageName\n\t\t\t});\n\t\t}\n\t}\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we need to modify our user page component so, when the request data get updated, it updates its \u003cem\u003euser\u003c/em\u003e data attribute so the presentation show the new data.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user-page.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../views/user-page.html';\nimport UserProfile from './user/profile-section';\nimport Repos from './user/repos-section';\nimport Notes from './user/notes-section';\n\nvar UserPage = Ractive.components.UserPage = Ractive.extend({\n\ttemplate: Template,\n\tcomponents: {\n\t\tUserProfile: UserProfile,\n\t\tRepos: Repos,\n\t\tNotes: Notes\n\t},\n\toninit() {\n\t\tthis.observe('req', (request) =\u0026gt; {\n\t\t\tthis.set('user', request.body.user);\n\t\t});\n\t}\n});\nUserPage._name = 'UserPage';\n\nexport default UserPage;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhen the page component is initialized, it begins observing for changes in the \u003cem\u003ereq\u003c/em\u003e data context attribute (which is handled by the \u003cem\u003eApp\u003c/em\u003e instance).\nAs we didn't set pages objects as isolated, they will get notified when that attribute gets updated.\u003c/p\u003e\n\u003cp\u003eIf you try to search for a user right now, you won't see any data in your browser, but you won't see any error neither. This is because there's something missing.\nRemember pages components are the only ones \u003cem\u003enon isolated\u003c/em\u003e, so we need to pass the right user's data to its reusable components.\nWe need to update our user's page view:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user-page.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;row\u0026quot;\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;UserProfile profile=\u0026quot;{{user.profile}}\u0026quot; /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Repos repos=\u0026quot;{{user.repos}}\u0026quot; /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Notes /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, if you load the app in your browser and search for a user, you must see his profile data and repos.\n\u003cimg src=\"/content/images/2015/08/ractive-tutorial-08.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePrevious post: \u003ca href=\"/post/ractive-js-tutorial-routing\"\u003eRouting\u003c/a\u003e\nNext post: \u003ca href=\"/post/ractive-js-tutorial-managing-users-notes\"\u003eManaging user's notes\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"ractive-js-tutorial-routing","title":"Ractive.js tutorial - Routing (3 of 6)","creationDate":"2015-08-01T15:15:44.447Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-creating-the-barebones\"\u003eCreating the barebones\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eRactive\u003c/em\u003e does not have its own \u003ca href=\"http://docs.ractivejs.org/latest/routing\"\u003erouting system\u003c/a\u003e becouse it is a library, not a framework, and routing is not part of its goal.\nIn the link above you can see they recommend:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://backbonejs.org/#Router\"\u003eBackbone.Router\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://visionmedia.github.io/page.js/\"\u003ePageJS\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThere is also a Ractive specific router built by Martin Kolarik you can check:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/MartinKolarik/ractive-route\"\u003eRactive-route\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs I already have some experience with \u003cem\u003ePageJS\u003c/em\u003e I will be using that library for implementing a custom made routing subsystem.\u003c/p\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-creating-the-barebones\"\u003eCreating the barebones\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eRactive\u003c/em\u003e does not have its own \u003ca href=\"http://docs.ractivejs.org/latest/routing\"\u003erouting system\u003c/a\u003e becouse it is a library, not a framework, and routing is not part of its goal.\nIn the link above you can see they recommend:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://backbonejs.org/#Router\"\u003eBackbone.Router\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://visionmedia.github.io/page.js/\"\u003ePageJS\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThere is also a Ractive specific router built by Martin Kolarik you can check:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/MartinKolarik/ractive-route\"\u003eRactive-route\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs I already have some experience with \u003cem\u003ePageJS\u003c/em\u003e I will be using that library for implementing a custom made routing subsystem.\u003c/p\u003e\n\u003ch2\u003eUser page\u003c/h2\u003e\n\u003cp\u003eRight now we only have implemented our \u003cem\u003ehome\u003c/em\u003e page so let's begin by creating our \u003cem\u003euser\u003c/em\u003e page.\nThis page will have three sections: Github user profile, Github user repos and our persisted notes about the user.\nLet's create the sections and then, the page which uses them.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/profile-section.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div\u0026gt;\n\t\u0026lt;h3\u0026gt; User Profile \u0026lt;/h3\u0026gt;\n\t\u0026lt;ul class=\u0026quot;list-group\u0026quot;\u0026gt;\n\t\t{{#profile.avatar_url}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt; \u0026lt;img src={{profile.avatar_url}} class=\u0026quot;img-rounded img-responsive\u0026quot; style=\u0026quot;min-height: 261px;\u0026quot;/\u0026gt;\u0026lt;/li\u0026gt;{{/profile.avatar_url}}\n\t\t{{#profile.name}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Name: {{profile.name}}\u0026lt;/li\u0026gt;{{/profile.name}}\n\t\t{{#profile.login}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Username: {{profile.login}}\u0026lt;/li\u0026gt;{{/profile.login}}\n\t\t{{#profile.email}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Email: {{profile.email}}\u0026lt;/li\u0026gt;{{/profile.email}}\n\t\t{{#profile.location}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Location: {{profile.location}}\u0026lt;/li\u0026gt;{{/profile.location}}\n\t\t{{#profile.company}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Company: {{profile.company}}\u0026lt;/li\u0026gt;{{/profile.company}}\n\t\t{{#profile.followers}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Followers: {{profile.followers}}\u0026lt;/li\u0026gt;{{/profile.followers}}\n\t\t{{#profile.following}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Following: {{profile.following}}\u0026lt;/li\u0026gt;{{/profile.following}}\n\t\t{{#profile.public_repos}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Public Repos: {{profile.public_repos}}\u0026lt;/li\u0026gt;{{/profile.public_repos}}\n\t\t{{#profile.blog}}\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;Blog: \u0026lt;a href=\u0026quot;{{profile.blog}}\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;{{profile.blog}}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;{{/profile.blog}}\n\t\u0026lt;/ul\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/profile-section.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../../views/user/profile-section.html';\n\nvar UserProfileSection = Ractive.extend({\n\t\tisolated: true,\n\ttemplate: Template\n});\n\nexport default UserProfileSection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/repos-section.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div\u0026gt;\n\t\u0026lt;h3\u0026gt;User repos ({{repos.length}})\u0026lt;/h3\u0026gt;\n\t\u0026lt;ul class=\u0026quot;list-group\u0026quot;\u0026gt;\n\t\t{{#each repos}}\n\t\t\t\u0026lt;li class=\u0026quot;list-group-item\u0026quot;\u0026gt;\n\t\t\t\t{{#html_url}}\n\t\t\t\t\t\u0026lt;h4\u0026gt;\u0026lt;a href=\u0026quot;{{html_url}}\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;{{name}}\u0026lt;/a\u0026gt;\u0026lt;/h4\u0026gt;\n\t\t\t\t{{/html_url}}\n\t\t\t\t{{#description}}\n\t\t\t\t\t\u0026lt;p\u0026gt;{{description}}\u0026lt;/p\u0026gt;\n\t\t\t\t{{/description}}\n\t\t\t\u0026lt;/li\u0026gt;\n\t\t{{/each}}\n\t\u0026lt;/ul\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/repos-section.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../../views/user/repos-section.html';\n\nvar ReposSection = Ractive.extend({\n\t\tisolated: true,\n\ttemplate: Template\n\t// If we declare here data with attributes provided from\n\t// the template, it stops working\n\t// This is the nearest issue I found: https://github.com/ractivejs/ractive/issues/1977\n\t/*,\n\tdata: {\n\t\t\trepos: []\n\t}*/\n});\n\nexport default ReposSection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user/notes-section.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div\u0026gt;\n\t\u0026lt;h3\u0026gt; Notes \u0026lt;/h3\u0026gt;\n\t\u0026lt;p\u0026gt;To be filled later...\u0026lt;/p\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user/notes-section.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003e'use strict';\n\nimport Ractive from 'ractive';\nimport Template from '../../../views/user/notes-section.html';\n\nvar NotesSection = Ractive.extend({\n\t\tisolated: true,\n\ttemplate: Template\n});\n\nexport default NotesSection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003eFinally, our \u003cem\u003euser\u003c/em\u003e page which uses previous sections:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/user-page.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;row\u0026quot;\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;UserProfile /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Repos /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\t\u0026lt;div class=\u0026quot;col-md-4\u0026quot;\u0026gt;\n\t\t\u0026lt;Notes /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/user-page.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../views/user-page.html';\nimport UserProfile from './user/profile-section';\nimport Repos from './user/repos-section';\nimport Notes from './user/notes-section';\n\nvar UserPage = Ractive.extend({\n\t\ttemplate: Template,\n\tcomponents: {\n\t\t\tUserProfile: UserProfile,\n\t\tRepos: Repos,\n\t\tNotes: Notes\n\t}\n});\n\nexport default UserPage;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, to check that everything is ok, we can update the \u003cem\u003eApp\u003c/em\u003e to render this page instead of the home page.\u003c/p\u003e\n\u003cp\u003eModify these files like this:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e (import and declare the new user page component):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\nimport UserPageComponent from './components/user-page'\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: template,\n  components: {\n\t  \tSearchUser: SearchUserComponent,\n  \tHomePage: HomePageComponent,\n  \tUserPage: UserPageComponent\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e (change the main section)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n\t\t\t\u0026lt;SearchUser placeholder=\u0026quot;Type a GitHub username...\u0026quot; /\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\u0026lt;UserPage /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you load the appliction right now, you should see something like this:\n\u003cimg src=\"/content/images/2015/08/ractive-tutorial-06.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2\u003eRouter component\u003c/h2\u003e\n\u003cp\u003eGreat, let's talk about routing...\nRight now, in our application template we're telling which page to use with this section:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n  \u0026lt;UserPage/\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe want to use a custom component that uses the page component corresponding to the current route.\nWe will be creating a \u003cem\u003eRoute\u003c/em\u003e component which accepts an attribute indicating which page component it should render.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/component/layout/router.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\n\n/*\n\tThis router has been built on top of the ideas from this Stack Overflow question:\n\thttp://stackoverflow.com/questions/31075341/how-to-create-ractives-subcomponents-dynamically-and-change-them-programmatical\n*/\n\nvar Router = Ractive.extend({\n\t\ttemplate: '\u0026lt;router-handler/\u0026gt;',\n\tcomponents: {\n\t\t\t'router-handler': function() {\n\t\t\t\treturn this.get('componentName');\n\t\t}\n\t},\n\toninit: function() {\n\t\t\tthis.observe('componentName', function(newValue, oldValue) {\n\t\t\t\tif (this.fragment.rendered) {\n\t\t\t\t\tthis.reset();\n\t\t\t}\n\t\t});\n\t}\n});\n\nexport default Router;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere are a lot of things happening here:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe template is very basic as it just needs what page component to use. We define a \u003cem\u003eroute-handler\u003c/em\u003e inner component which is linked in the second step.\u003c/li\u003e\n\u003cli\u003eWe define the inner component so that instead of being a component class, it is a function that returns the page component it should use. The page component will be a router data attribute which will be updated from the \u003cem\u003eApp\u003c/em\u003e. Take note that we don't define this component as isolated as we want it to be aware of the page component it should render, which will be handled from the \u003cem\u003eApp\u003c/em\u003e instance.\u003c/li\u003e\n\u003cli\u003eWhen this \u003cem\u003erouter\u003c/em\u003e component is initialized, it registers a listener on the \u003cem\u003ecomponentName\u003c/em\u003e data attribute from its context (which inherits from its parent, \u003cem\u003eApp\u003c/em\u003e instance) so that, every time it gets updated, this component calls its \u003cstrong\u003ereset\u003c/strong\u003e function, which causes it to re-render, using the new page component set in the \u003cem\u003ecomponentName\u003c/em\u003e attribute.\u003c/li\u003e\n\u003cli\u003eWe have a conditional statement so we don't do this if the component has not been already rendered for the first time (bootstraping).\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eNow we need to update our \u003cem\u003eApp\u003c/em\u003e instance so it makes use of this new component, instead of setting in its template which page component to use.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n\t\t\t\u0026lt;SearchUser placeholder=\u0026quot;Type a GitHub username...\u0026quot; /\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\u0026lt;Router componentName=\u0026quot;{{componentName}}\u0026quot;/\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTake note about the attribute we're passing to Router component from the markup.\u003c/p\u003e\n\u003cp\u003eWe also need to update the \u003cem\u003eApp\u003c/em\u003e to create the \u003cem\u003ecomponentName\u003c/em\u003e property so we can handle there the value for the page we must show.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\nimport UserPageComponent from './components/user-page'\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: template,\n  components: {\n\t  \tSearchUser: SearchUserComponent,\n  \tHomePage: HomePageComponent,\n  \tUserPage: UserPageComponent\n  },\n  data: {\n\t  \tcomponentName: 'HomePage'\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, if you reload your browser, you should see the \u003cem\u003ehome\u003c/em\u003e page again, and, if you change the \u003cem\u003ecomponentName\u003c/em\u003e data attribute from \u003cem\u003eHomePage\u003c/em\u003e to \u003cem\u003eUserPage\u003c/em\u003e and reload your browser again, you should see the user page instead.\u003c/p\u003e\n\u003cp\u003eOk, so now we have the ability to show different pages from the \u003cem\u003eApp\u003c/em\u003e, but how do we link this to URL changes and how do we navigate from one to another?\nThis is when we begin using \u003ca href=\"https://visionmedia.github.io/page.js/\"\u003ePageJS\u003c/a\u003e. Like every other routing library, it allows us to be notified when the URL changes, it can force URL changes and it also allows to handle redirects.\u003c/p\u003e\n\u003cp\u003eTake a moment to install the library in our project:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm install page --save\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe will create our own library module on top of \u003cem\u003ePageJS\u003c/em\u003e which will be initialized from our \u003cem\u003eApp\u003c/em\u003e instance, getting passed the routing configuration, so it knows which function is has to invoke for every registerd route.\u003c/p\u003e\n\u003cp\u003eLet's begin by defining routing configuration module:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/config/routes.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003e'use strict';\n\nimport router from '../plugins/router';\nimport HomePage from '../components/home-page';\nimport UserPage from '../components/user-page';\n\nvar routes = new Map();\n\nroutes.set('/', (context, next) =\u0026gt; {\n\t\tnext(null, HomePage);\n});\n\nroutes.set('/user/:username', (context, next) =\u0026gt; {\n\t\tnext(null, UserPage);\n});\n\nexport default routes;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, the router module:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/plugins/router.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport page from 'page';\nimport Ractive from 'ractive';\n\nfunction navigationHandler(routeHandler, onNavigation) {\n\t\treturn function(context/*, next*/) {\n\t\t\trouteHandler(context, (error, PageComponent = {}, data = {}) =\u0026gt; {\n\t\t\t\tcontext.pageName = PageComponent._name;\n\t\t\tcontext.state = data;\n\t\t\tonNavigation(error, context);\n\t\t})\n\t};\n}\n\nexport function init(routes, onNavigation) {\n\t\n\troutes.forEach((routeHandler, path) =\u0026gt; {\n\t\t\tpage(path, navigationHandler(routeHandler, onNavigation));\n\t});\n\n\tpage({\n\t\t\thashbang: true\n\t});\n}\n\nexport function navTo(url) {\n\t\tpage.show(url);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003cem\u003einit\u003c/em\u003e function gets the configuration map and a callback as parameters. The second one will be invoked after the router handler gets executed with a \u003cem\u003econtext\u003c/em\u003e object containing routing information and the data passed from the route handler function (defined in the \u003cem\u003eroutes.js\u003c/em\u003e filed).\nThe last line in this file initializes \u003cem\u003ePageJS\u003c/em\u003e so, by default, it intercepts all links and checks if we have a handler configured for them.\nWe also pass the configuration \u003cem\u003ehashbang: true\u003c/em\u003e so we don't use HTML5 \u003cem\u003epushState\u003c/em\u003e and use the URL hash fragment instead, as we won't be using a server and the application would fail if we try to load an URL like this: http://localhost:8080/user/paquitosoft.\u003c/p\u003e\n\u003cp\u003eThis file also has a \u003cem\u003enavTo\u003c/em\u003e function so we can programatically navigate to any route. We will use it from our \u003cem\u003eSearchUser\u003c/em\u003e component.\u003c/p\u003e\n\u003cp\u003eOk, lets update our \u003cem\u003eApp\u003c/em\u003e instance to deal with routing with all we have done until now:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\n\nimport * as RouterPlugin from './plugins/router';\nimport routesConfiguration from './config/routes';\n\nimport RouterComponent from './components/layout/router';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\nimport UserPageComponent from './components/user-page'\n\nlet App = new Ractive({\n\t\tel: '#app',\n\ttemplate: template,\n\tcomponents: {\n\t\t\tSearchUser: SearchUserComponent,\n\t\tRouter: RouterComponent,\n\t\tHomePage: HomePageComponent,\n\t\tUserPage: UserPageComponent\n\t},\n\tdata: {\n\t\t\tcomponentName: 'HomePage'\n\t},\n\toninit() {\n\t\t\tRouterPlugin.init(routesConfiguration, this.onNavigation.bind(this));\n\t\tconsole.log('App::oninit# Application initialized!');\n\t},\n\tonNavigation(error, navigationContext) {\n\t\t\tconsole.log('APP::onNavigation# Navigating to:', navigationContext.pageName, 'with context:', navigationContext);\n\n\t\tif (error) {\n\t\t\t\tconsole.warn('App::onNavigation# Error navigating:', error);\n\t\t} else {\n\t\t\t\tthis.set({\n\t\t\t\t\treq: {\n\t\t\t\t\t\tparams: navigationContext.params,\n\t\t\t\t\tbody: navigationContext.state\n\t\t\t\t},\n\t\t\t\tcomponentName: navigationContext.pageName\n\t\t\t});\n\t\t}\n\t}\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, when the \u003cem\u003eApp\u003c/em\u003e is initialized, it configures the route module passing the routes configuration and a callback function.\nWhen the callback gets called, we update the data context setting the \u003cem\u003ecomponentName\u003c/em\u003e attribute to the name of the page component we need to show. The value gets to this function in the \u003cem\u003enavigationContext\u003c/em\u003e parameter which gets passed from the router plugin, which gets it from the routes configuration the \u003cem\u003eApp\u003c/em\u003e passed upon initialization.\u003c/p\u003e\n\u003cp\u003eThe last touch is to update the home page so we can test our navigation:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;h2 class=\u0026quot;text-center\u0026quot;\u0026gt;\n\tSearch by Github username above\n\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;\n\tNav to \u0026lt;a href=\u0026quot;/user/paquitosoft\u0026quot;\u0026gt;User Page\u0026lt;/a\u0026gt;\n\u0026lt;/p\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, if you load the home page on your browser (http://localhost:8080/), you should see this:\n\u003cimg src=\"/content/images/2015/08/ractive-tutorial-07.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eYou can follow the lower-left link to load the user page and use the upper-left (\u003cem\u003eNotetaker\u003c/em\u003e) title link to get back to the home page.\n(_Remember to remove the lower-left link once you're done with your tests).\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePrevious post: \u003ca href=\"/post/ractive-js-tutorial-creating-the-barebones\"\u003eCreating the barebones\u003c/a\u003e\nNext post: \u003ca href=\"/post/ractive-js-tutorial-loading-user-info\"\u003eLoading user info\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"ractive-js-tutorial-creating-the-barebones","title":"Ractive.js tutorial - Creating the barebones (2 of 6)","creationDate":"2015-07-28T20:35:02.558Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-setting-up-your-environment/\"\u003eSetting up your environment\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eOk, so now that you have all ready to fly, let's check what we want to do.\u003c/p\u003e\n\u003cp\u003eThe goal is to build a simple app that let us view \u003ca href=\"https://github.com/\"\u003eGitHub\u003c/a\u003e user's information and, also, to manage our own message notes for every user.\nWe will have a common layout with a static section (the one where you can search for users) and two subviews, having each one a different URL:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHome page: will only contain a welcome message\u003c/li\u003e\n\u003cli\u003eUser profile page: will contain three sections for every user info group\u003c/li\u003e\n\u003c/ul\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step\u003c/em\u003e: \u003ca href=\"/post/ractive-js-tutorial-setting-up-your-environment/\"\u003eSetting up your environment\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eOk, so now that you have all ready to fly, let's check what we want to do.\u003c/p\u003e\n\u003cp\u003eThe goal is to build a simple app that let us view \u003ca href=\"https://github.com/\"\u003eGitHub\u003c/a\u003e user's information and, also, to manage our own message notes for every user.\nWe will have a common layout with a static section (the one where you can search for users) and two subviews, having each one a different URL:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHome page: will only contain a welcome message\u003c/li\u003e\n\u003cli\u003eUser profile page: will contain three sections for every user info group\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is the home page:\n\u003cimg src=\"/content/images/2015/08/ractive-tutorial-03.png\" alt=\"Home page\"\u003e\n\u0026lt;br\u0026gt;\u003c/p\u003e\n\u003cp\u003eThis is the user page:\n\u003cimg src=\"/content/images/2015/07/ractive-tutorial-04.png\" alt=\"User profile page\"\u003e\u003c/p\u003e\n\u003cp\u003eOur main layout will host the header and a dynamic section we will fill with the subsections depending on the URL and the user actions.\u003c/p\u003e\n\u003cp\u003eSo, the first thing is to create our main \u003cem\u003ehtml\u003c/em\u003e layout.\nOpen the \u003cstrong\u003eindex.html\u003c/strong\u003e file and populate it with this content:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html\u0026gt;\n\t\u0026lt;head\u0026gt;\n\t\t\u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt;\n\t\t\u0026lt;title\u0026gt;Ractive Github notetaker\u0026lt;/title\u0026gt;\n\t\t\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;./node_modules/bootstrap/dist/css/bootstrap.css\u0026quot;\u0026gt;\n\t\u0026lt;/head\u0026gt;\n\n\t\u0026lt;body\u0026gt;\n\t\t\u0026lt;div id=\u0026quot;app\u0026quot;\u0026gt;\u0026lt;/div\u0026gt;\n\n\t\t\u0026lt;script src=\u0026quot;dist/js/app-bundle.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n\t\u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis basic \u003cem\u003ehtml\u003c/em\u003e just loads \u003ca href=\"http://getbootstrap.com/\"\u003ebootstrap\u003c/a\u003e for styling, creates an empty \u003cem\u003ediv\u003c/em\u003e where we will load our application content, and requests the \u003cem\u003eJS\u003c/em\u003e bundle which will contains all of our magic code.\u003c/p\u003e\n\u003cp\u003eThe way Ractive works it that you create a new instance of its main object specifying the \u003cem\u003ehtml/handlebars\u003c/em\u003e template it will need to deal with, the place in the document it will fills, and the data it must manage (and display). Of course, there are a lot of other properties you can initialize instances with, but keep this idea by now.\u003c/p\u003e\n\u003cp\u003eLet's update our main \u003cem\u003eJS\u003c/em\u003e file with a \u003cem\u003eRactive\u003c/em\u003e instance that will represent our application.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: '\u0026lt;input type=\u0026quot;text\u0026quot; value=\u0026quot;{{name}}\u0026quot;\u0026gt;\u0026lt;p\u0026gt;Name: {{name}}\u0026lt;/p\u0026gt;',\n  data: {\n\t    name: 'Paquitosoft'\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBefore we go any further, we must install our first production dependency: \u003ca href=\"http://www.ractivejs.org/\"\u003eRactive.js\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language\"\u003e$ npm install ractive --save\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, if you re/start your server (\u003cem\u003enpm start\u003c/em\u003e), you will see a blank page with an input and a label with a text.\nNote how changing the value from the input, the text besides de label gets updated.\nThis is because \u003cem\u003eRactive data binding\u003c/em\u003e, implemented just by linking the value of the input to the \u003cem\u003ename\u003c/em\u003e attribute of the Ractive instance \u003cem\u003edata\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eIf you've ever used \u003ca href=\"https://github.com/janl/mustache.js\"\u003eMustache\u003c/a\u003e or \u003ca href=\"http://handlebarsjs.com/\"\u003eHandlebars\u003c/a\u003e before, \u003ca href=\"http://docs.ractivejs.org/latest/templates\"\u003e\u003cem\u003eRactive\u003c/em\u003e template system\u003c/a\u003e is very similar. It's an extension of \u003cem\u003eMustache\u003c/em\u003e with some sugar to make your life easier.\u003c/p\u003e\n\u003cp\u003eNotice the \u003cstrong\u003etemplate\u003c/strong\u003e attribute we're passing in the Ractive instance initialization. It holds the contents of the template for the purpose of this little example, but we want to have that template in its own file for better organization.\u003c/p\u003e\n\u003cp\u003eLet's create a new folder for holding our templates and create the main application one.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/views/app.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n            Here will be the search controls...\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n        Here will be the main content of every route...\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn order to use this file in our application main file, we need to import it. But, as by default \u003cem\u003ewebpack\u003c/em\u003e interprets all dependencies as \u003cem\u003eJS\u003c/em\u003e, we need to configure it to understand our templates are only text and it doesn't need to process them.\nWe do this by configuring a new \u003cem\u003ewebpack\u003c/em\u003e loader which allows to simple import the files contents as they are (\u003ca href=\"https://github.com/webpack/raw-loader\"\u003eraw-plugin\u003c/a\u003e).\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/webpack.config.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003emodule.exports = {\n\t\tentry: './app/js/app.js',\n\toutput: {\n\t\t\tfilename: './dist/js/app-bundle.js'\n\t},\n\tmodule: {\n\t\t\tloaders: [\n\t\t\t\t{\n\t\t\t\t\ttest: /\\\\.js$/,\n\t\t\t\texclude: /(node_modules|bower_components)/,\n\t\t\t\tloader: 'babel'\n\t\t\t},\n\t\t\t{\n\t\t\t\t\ttest: /\\\\.html$/,\n\t\t\t\tloader: 'raw'\n\t\t\t}\n\t\t]\n\t}\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we import the template in the \u003cem\u003eapp\u003c/em\u003e file, re/start our main process (\u003cem\u003enpm start\u003c/em\u003e) and check \u003ca href=\"\"\u003ehttp://localhost:8080\u003c/a\u003e.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from './views/app.html';\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: template,\n  data: {\n\t    name: 'Paquitosoft'\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u0026lt;br\u0026gt;\u003c/p\u003e\n\u003ch2\u003eRactive components\u003c/h2\u003e\n\u003cp\u003eOn top of direct instances, Ractive allows us to use what they call \u003ca href=\"http://docs.ractivejs.org/latest/components\"\u003eComponents\u003c/a\u003e.\nThe idea behind this kind of objects is to allow you to create encapsulated components very much like \u003ca href=\"http://facebook.github.io/react/\"\u003eReact\u003c/a\u003e does.\nOnce you declare and register them (can be globally or per instance/component), you can use it inside your templates as new \u003cem\u003ehtml\u003c/em\u003e entities.\u003c/p\u003e\n\u003cp\u003eTo demonstrate how they work, we will create a new component to encapsulate the search functionality.\nWe begin by creating the template in a new file:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/search-user.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;col-sm-12\u0026quot;\u0026gt;\n\t\u0026lt;form on-submit=\u0026quot;searchUser\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;form-group col-sm-7\u0026quot;\u0026gt;\n\t\t\t\u0026lt;input type=\u0026quot;text\u0026quot; class=\u0026quot;form-control\u0026quot; value=\u0026quot;{{query}}\u0026quot; autofocus placeholder=\u0026quot;{{placeholder}}\u0026quot;/\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\n\t\t\u0026lt;div class=\u0026quot;form-group col-sm-5\u0026quot;\u0026gt;\n\t\t\t\u0026lt;button type=\u0026quot;submit\u0026quot; class=\u0026quot;btn btn-block btn-primary\u0026quot;\u0026gt;Search Github\u0026lt;/button\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/form\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's comment this template a little bit...\u003c/p\u003e\n\u003cp\u003eThe \u003cstrong\u003eon-submit\u003c/strong\u003e attribute in the \u003cem\u003eform\u003c/em\u003e tag is a \u003ca href=\"http://docs.ractivejs.org/latest/events-overview\"\u003eRactive proxy event\u003c/a\u003e declaration. Every time the user submits the form, the component managing this template will be notified (we'll see how to listen to that event in a moment).\u003c/p\u003e\n\u003cp\u003eThe \u003cem\u003einput\u003c/em\u003e tag has a data binding value with the \u003cstrong\u003equery\u003c/strong\u003e component data attribute. \u003cem\u003eRactive\u003c/em\u003e will keep the sync. The same goes for the \u003cstrong\u003eplaceholder\u003c/strong\u003e.\nWhile the first one is only used inside the component, we will provide the latter from the parent \u003cem\u003eApp\u003c/em\u003e instance just to show how you can share data between them.\u003c/p\u003e\n\u003cp\u003eYou must know that \u003cem\u003ecomponents\u003c/em\u003e, by defuault, inherit its parent data context. This search component will be used from the App main instance, meaning that App's data attributes are, by default, visible to the \u003cem\u003esearch\u003c/em\u003e component.\nPersonally I don't like this kind of behavior by default as components get less reusable when they depend on some context not declared. I prefer to use them in \u003cem\u003eisolated\u003c/em\u003e model, where they create an own data attributes context  which you can pass specific parameters.\u003c/p\u003e\n\u003cp\u003eLet's create our component in a new file:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/layout/search-user.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../../views/layout/search-user.html';\n\nvar SearchGithub = Ractive.extend({\n\t\tisolated: true,\n\ttemplate: Template,\n\n\toninit() {\n\t\t\tthis.on('searchUser', (rEvent) =\u0026gt; {\n\t\t\t\trEvent.original.preventDefault();\n\n\t\t\tlet username = rEvent.context.query;\n\t\t\t\n\t\t\tconsole.log('This is the user you want to look up:', username);\n\t\t});\n\t},\n\n\tdata: {\n\t\t\tquery: ''\n\t}\n});\n\nexport default SearchGithub;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe way we create a \u003cem\u003eRactive\u003c/em\u003e component is by executing its \u003cstrong\u003eextend\u003c/strong\u003e function, passing the attributes which configure the component:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eisolated: We set this attribute to false so a new independent data context it's created for this component.\u003c/li\u003e\n\u003cli\u003etemaplate: Set the template we previously declared.\u003c/li\u003e\n\u003cli\u003eoninit: This function will be executed everytime the component gets initialized (Check \u003ca href=\"http://docs.ractivejs.org/latest/lifecycle-events\"\u003ethis link\u003c/a\u003e to review the info of all life-cycle events).\u003c/li\u003e\n\u003cli\u003edata: Here we define the inner properties.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAlso, in our \u003cem\u003eoninit\u003c/em\u003e handler we set up a listener for the \u003cstrong\u003eon-submit\u003c/strong\u003e event by listening to the custom event \u003cstrong\u003esearchUser\u003c/strong\u003e.\nThe handler receives an extension of the native browser event enhanced with some useful information (check the \u003cem\u003eEvent arguments\u003c/em\u003e section of the \u003ca href=\"http://docs.ractivejs.org/latest/proxy-events\"\u003eproxy events\u003c/a\u003e docs to see the details).\nWe access the \u003cem\u003eoriginal\u003c/em\u003e property where we find the native browser event just to prevent default behavior. Note that you could also get this by returning \u003cem\u003efalse\u003c/em\u003e from this listener function, but that also stops event propagation.\nThe \u003cstrong\u003econtext\u003c/strong\u003e attribute for the event holds a data reference to the context where the event took place. In this case is the \u003cem\u003einput\u003c/em\u003e tag, represented by an object with its data bindings.\u003c/p\u003e\n\u003cp\u003eSo now that we have our component set up, let's use it from the App.\nFirst we need to update the App markup:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n\t\t\t\u0026lt;SearchUser placeholder=\u0026quot;Type a GitHub username...\u0026quot; /\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\tHere will be the main content of every route...\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTake note about how we're providing some data to the component by providing a tag attribute (\u003cem\u003eplaceholder\u003c/em\u003e).\u003c/p\u003e\n\u003cp\u003eSecond, we update our \u003cem\u003eApp\u003c/em\u003e instance to tell it to use the \u003cem\u003esearch-user\u003c/em\u003e component:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\nimport SearchUserComponent from './components/layout/search-user';\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: template,\n  components: {\n\t  \tSearchUser: SearchUserComponent\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe've just imported the \u003cem\u003esearch-user\u003c/em\u003e component and we set it as an \u003cem\u003eApp\u003c/em\u003e component using its \u003cstrong\u003ecomponents\u003c/strong\u003e attributes. You just need to configure an object with the \u003cem\u003ecomponents\u003c/em\u003e you will use in your instance (or \u003cem\u003ecomponent\u003c/em\u003e) where the key is the name you will use for the \u003cem\u003ecomponent\u003c/em\u003e in the template and the value will be the \u003cem\u003ecomponent class\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eYou can also register the components globally like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eRactive.components.SearchUser = SearchUserComponent\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe benefit is that all Ractive instances and \u003cem\u003ecomponents\u003c/em\u003e will \u003cem\u003esee\u003c/em\u003e the component.\nThe downside is that you loose visibility about which components your instance/component is using in the code.\nThis is just a personal choice, and I prefer being specific.\u003c/p\u003e\n\u003cp\u003eOk, if you reload you browser now, you must see this picture:\n\u003cimg src=\"/content/images/2015/07/ractive-tutorial-05.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eThe last step on this post is to also create a component for the main dynamic section representing the home page.\nWe will do this for the sake of modularity and to get ready for the next post about routing.\nThe template is very simple:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/home-page.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;h2 class=\u0026quot;text-center\u0026quot;\u0026gt;\n\tSearch by Github username above\n\u0026lt;/h2\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe component is also trivial:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/components/home-page.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport Template from '../../views/home-page.html';\n\nvar HomePage = Ractive.extend({\n\t\ttemplate: Template\n});\n\nexport default HomePage;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow update App to use this new component:\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/views/app.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;div class=\u0026quot;main-container\u0026quot;\u0026gt;\n\t\u0026lt;nav class=\u0026quot;navbar navbar-default\u0026quot; role=\u0026quot;navigation\u0026quot;\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-1\u0026quot;\u0026gt;\n\t\t\t\u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h3\u0026gt;Notetaker\u0026lt;/h3\u0026gt;\n\t\t\t\u0026lt;/a\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;div class=\u0026quot;col-sm-7 col-sm-offset-1\u0026quot; style=\u0026quot;margin-top: 15px;\u0026quot;\u0026gt;\n\t\t\t\u0026lt;SearchUser placeholder=\u0026quot;Type a GitHub username...\u0026quot; /\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/nav\u0026gt;\n\t\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\u0026lt;HomePage /\u0026gt;\n\t\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language-javascript\"\u003eimport Ractive from 'ractive';\nimport template from '../views/app.html';\nimport SearchUserComponent from './components/layout/search-user';\nimport HomePageComponent from './components/home-page';\n\nlet App = new Ractive({\n\t  el: '#app',\n  template: template,\n  components: {\n\t  \tSearchUser: SearchUserComponent,\n  \tHomePage: HomePageComponent\n  }\n});\n\nexport default App;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSummary\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWe now know what we want to build.\u003c/li\u003e\n\u003cli\u003eWe created the main App instance using \u003cem\u003eRactive\u003c/em\u003e.\u003c/li\u003e\n\u003cli\u003eWe configured \u003ca href=\"http://webpack.github.io/\"\u003ewebpack\u003c/a\u003e to make it load our \u003cem\u003ehtml\u003c/em\u003e templates.\u003c/li\u003e\n\u003cli\u003eWe got some insights about this library and how it works: what components are, how to configure data bindings, how to listen to DOM events and how to handle data contexts.\u003c/li\u003e\n\u003cli\u003eWe divided our little application in pieces both in terms of presentation (views) and behavior (components).\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePrevious post: \u003ca href=\"/post/ractive-js-tutorial-setting-up-your-environment\"\u003eSetting up your environment\u003c/a\u003e\nNext post: \u003ca href=\"/post/ractive-js-tutorial-routing\"\u003eRouting\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"ractive-js-tutorial-setting-up-your-environment","title":"Ractive.js tutorial - Setting up your environment (1 of 6)","creationDate":"2015-07-26T20:08:29.713Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/create-a-ractive-application-tutorial\"\u003eTutorial introduction\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eI'm glad you decided to get here and I hope I can get your attention all the way down to the end of this tutorial.\u003c/p\u003e\n\u003cp\u003eSo, the first step is to set up your working environment with the tools you will use.\nI assume you have \u003ca href=\"https://nodejs.org/download/\"\u003eNodeJS\u003c/a\u003e and NPM installed in your system. If not, please, follow the previous link and come back once you're ready.\u003c/p\u003e\n\u003cp\u003eNow, you need to create a new empty folder and initialize your project with \u003cem\u003enpm\u003c/em\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language\"\u003e$ mkdir notetaker-ractive\n$ cd notetaker-ractive\n$ npm init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eNPM\u003c/em\u003e will ask you some questions. You don't need to type anything and just press \u003cem\u003eEnter\u003c/em\u003e for every question.\nThis command has created a new file (\u003cem\u003epackage.json\u003c/em\u003e) in your folder.\nNow we need to install the basic packages:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://webpack.github.io/\"\u003eWebpack\u003c/a\u003e: will help us to bundle all our JS code and to use \u003cem\u003eES2015\u003c/em\u003e import system.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://babeljs.io/\"\u003eBabel\u003c/a\u003e: will help us to use new \u003cem\u003eES2015\u003c/em\u003e features by transpiling them to \u003cem\u003eES5\u003c/em\u003e compatible code.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/cloudhead/node-static\"\u003enode-static\u003c/a\u003e: will serve our files (static server)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can use this command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm i webpack babel-core babel-loader node-static --save-dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eUPDATE (24-02-2016)\u003c/strong\u003e:\n\u003cem\u003eThe new version of Babel (v6) requires an extra dependency to be installed and configured. Please, if you're following this tutorial for the first time, also install \u003cstrong\u003ebabel-preset-es2015\u003c/strong\u003e dependency\u003c/em\u003e.\u003c/p\u003e\n","content":"\u003cp\u003e(\u003cem\u003ePrevious step: \u003ca href=\"/post/create-a-ractive-application-tutorial\"\u003eTutorial introduction\u003c/a\u003e\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003eI'm glad you decided to get here and I hope I can get your attention all the way down to the end of this tutorial.\u003c/p\u003e\n\u003cp\u003eSo, the first step is to set up your working environment with the tools you will use.\nI assume you have \u003ca href=\"https://nodejs.org/download/\"\u003eNodeJS\u003c/a\u003e and NPM installed in your system. If not, please, follow the previous link and come back once you're ready.\u003c/p\u003e\n\u003cp\u003eNow, you need to create a new empty folder and initialize your project with \u003cem\u003enpm\u003c/em\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-language\"\u003e$ mkdir notetaker-ractive\n$ cd notetaker-ractive\n$ npm init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eNPM\u003c/em\u003e will ask you some questions. You don't need to type anything and just press \u003cem\u003eEnter\u003c/em\u003e for every question.\nThis command has created a new file (\u003cem\u003epackage.json\u003c/em\u003e) in your folder.\nNow we need to install the basic packages:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://webpack.github.io/\"\u003eWebpack\u003c/a\u003e: will help us to bundle all our JS code and to use \u003cem\u003eES2015\u003c/em\u003e import system.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://babeljs.io/\"\u003eBabel\u003c/a\u003e: will help us to use new \u003cem\u003eES2015\u003c/em\u003e features by transpiling them to \u003cem\u003eES5\u003c/em\u003e compatible code.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/cloudhead/node-static\"\u003enode-static\u003c/a\u003e: will serve our files (static server)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can use this command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm i webpack babel-core babel-loader node-static --save-dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eUPDATE (24-02-2016)\u003c/strong\u003e:\n\u003cem\u003eThe new version of Babel (v6) requires an extra dependency to be installed and configured. Please, if you're following this tutorial for the first time, also install \u003cstrong\u003ebabel-preset-es2015\u003c/strong\u003e dependency\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eLet's start coding by creating our main \u003cem\u003ehtml\u003c/em\u003e file.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/index.html\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html\u0026gt;\n\t\u0026lt;head\u0026gt;\n\t\t\u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt;\n\t\t\u0026lt;title\u0026gt;Ractive Github notetaker\u0026lt;/title\u0026gt;\n        \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;./node_modules/bootstrap/dist/css/bootstrap.css\u0026quot;\u0026gt;\t\u0026lt;/head\u0026gt;\n\t\u0026lt;body\u0026gt;\n\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\t\u0026lt;div class=\u0026quot;starter-template\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h1\u0026gt;Bootstrap starter template\u0026lt;/h1\u0026gt;\n\t\t\t\t\u0026lt;p class=\u0026quot;lead\u0026quot;\u0026gt;Use this document as a way to quickly start any new project.\u0026lt;br\u0026gt; All you get is this text and a mostly barebones HTML document.\u0026lt;/p\u0026gt;\n\t\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\t\u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn order to easily start a local server, we need to update our \u003cstrong\u003epackage.json\u003c/strong\u003e file. Look for the \u003cem\u003escripts\u003c/em\u003e attribute and replace the \u003cem\u003etest\u003c/em\u003e property with a \u003cem\u003estart\u003c/em\u003e one.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/package.json\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n  \u0026quot;name\u0026quot;: \u0026quot;notetaker-ractive\u0026quot;,\n  \u0026quot;version\u0026quot;: \u0026quot;1.0\u0026quot;,\n  \u0026quot;description\u0026quot;: \u0026quot;\u0026quot;,\n  \u0026quot;main\u0026quot;: \u0026quot;index.js\u0026quot;,\n  \u0026quot;author\u0026quot;: \u0026quot;Your name\u0026quot;,\n  \u0026quot;scripts\u0026quot;: {\n\t    \u0026quot;start\u0026quot;: \u0026quot;node node_modules/node-static/bin/cli.js\u0026quot;\n  },\n  \u0026quot;author\u0026quot;: \u0026quot;Your name\u0026quot;,\n  \u0026quot;license\u0026quot;: \u0026quot;ISC\u0026quot;,\n  \u0026quot;devDependencies\u0026quot;: {\n\t    \u0026quot;babel-core\u0026quot;: \u0026quot;^5.8.9\u0026quot;,\n    \u0026quot;babel-loader\u0026quot;: \u0026quot;^5.3.2\u0026quot;,\n    \u0026quot;bootstrap\u0026quot;: \u0026quot;^3.3.5\u0026quot;,\n    \u0026quot;node-static\u0026quot;: \u0026quot;^0.7.7\u0026quot;,\n    \u0026quot;webpack\u0026quot;: \u0026quot;^1.10.5\u0026quot;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow you only need to run this command from the root folder of your project everytime you want to start the server:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you load this URL (http://localhost:8080/) in your browser, you should see the basic \u003cem\u003ehtml\u003c/em\u003e we've created.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/content/images/2015/07/ractive-tutorial-01.png\" alt=\"Skeleton webpage\"\u003e\u003c/p\u003e\n\u003cp\u003eThe next step is to configure \u003cem\u003ewebpack\u003c/em\u003e with the ability to \u003cem\u003ecompile\u003c/em\u003e modern JS code.\u003c/p\u003e\n\u003cp\u003eWe need to create a new \u003cem\u003ewebpack\u003c/em\u003e configuration file and populate it with these contents: \u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/webpack.config.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003emodule.exports = {\n\t\tentry: './app/js/app.js',\n\toutput: {\n\t\t\tfilename: './dist/js/app-bundle.js'\n\t},\n\tmodule: {\n\t\t\tloaders: [\n\t\t\t\t{\n\t\t\t\t\ttest: /\\\\.js$/,\n\t\t\t\texclude: /(node_modules|bower_components)/,\n\t\t\t\tloader: 'babel',\n                // If you're following the tutorial for the first time, \n                // you will be using Babel v6 and thus you need to add this extra configuration\n                query: {\n\t                    presets: ['es2015']\n                }\n\t\t\t}\n\t\t]\n\t}\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe're telling \u003cem\u003ewebpack\u003c/em\u003e that our main JS file is \u003cstrong\u003e./app/js/app.js\u003c/strong\u003e, that it should create only one bundle file with its contents (and all its dependencies) in \u003cstrong\u003e./dist/js/app-bundle.js\u003c/strong\u003e and that it should filter all files with a javascript extension (\u003cstrong\u003e.js\u003c/strong\u003e) with \u003cem\u003ebabel\u003c/em\u003e loader, which will interpret \u003cem\u003eES2015\u003c/em\u003e code and convert it to \u003cem\u003eES5\u003c/em\u003e compatible.\u003c/p\u003e\n\u003cp\u003eNow let's create a basic \u003cem\u003eapp.js\u003c/em\u003e file to test everything is working.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/app/js/app.js\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eclass Foo {\n\t\tconstructor(name) {\n\t\t\tthis.name = name;\n\t}\n\n\tsayHi() {\n\t\t\talert(`Hi ${this.name}!!!`);\n\t}\n}\n\nlet bar = new Foo('Paquitosoft');\n\nbar.sayHi();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eJust a simple code to demonstrate that \u003cem\u003eES2015\u003c/em\u003e code is compiled by babel to produce \u003cem\u003eES5\u003c/em\u003e compatible code.\u003c/p\u003e\n\u003cp\u003eUpdate the \u003cstrong\u003eindex.html\u003c/strong\u003e file to load the bundle JS at the end of the \u003cem\u003ebody\u003c/em\u003e tag:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html\u0026gt;\n\t\u0026lt;head\u0026gt;\n\t\t\u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt;\n\t\t\u0026lt;title\u0026gt;Ractive Github notetaker\u0026lt;/title\u0026gt;\n        \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;./node_modules/bootstrap/dist/css/bootstrap.css\u0026quot;\u0026gt;\t\u0026lt;/head\u0026gt;\n\t\u0026lt;body\u0026gt;\n\u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\n\t\t\t\u0026lt;div class=\u0026quot;starter-template\u0026quot;\u0026gt;\n\t\t\t\t\u0026lt;h1\u0026gt;Bootstrap starter template\u0026lt;/h1\u0026gt;\n\t\t\t\t\u0026lt;p class=\u0026quot;lead\u0026quot;\u0026gt;Use this document as a way to quickly start any new project.\u0026lt;br\u0026gt; All you get is this text and a mostly barebones HTML document.\u0026lt;/p\u0026gt;\n\t\t\t\u0026lt;/div\u0026gt;\n\t\t\u0026lt;/div\u0026gt;\n\n        \u0026lt;script src=\u0026quot;dist/js/app-bundle.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n\t\u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe last step is to update our \u003cem\u003enpm start script\u003c/em\u003e to also use \u003cem\u003ewebpack\u003c/em\u003e in monitoring mode so, everytime you update a file, it updates the generated bundle.\n\u003cstrong\u003e\u003cem\u003eroot-folder\u003c/em\u003e/package.json\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n  \u0026quot;name\u0026quot;: \u0026quot;notetaker-ractive\u0026quot;,\n  \u0026quot;version\u0026quot;: \u0026quot;1.0\u0026quot;,\n  \u0026quot;description\u0026quot;: \u0026quot;\u0026quot;,\n  \u0026quot;main\u0026quot;: \u0026quot;index.js\u0026quot;,\n  \u0026quot;author\u0026quot;: \u0026quot;Your name\u0026quot;,\n  \u0026quot;scripts\u0026quot;: {\n\t    \u0026quot;start\u0026quot;: \u0026quot;webpack -w \u0026amp; node_modules/node-static/bin/cli.js\u0026quot;\n  },\n  \u0026quot;author\u0026quot;: \u0026quot;Your name\u0026quot;,\n  \u0026quot;license\u0026quot;: \u0026quot;ISC\u0026quot;,\n  \u0026quot;devDependencies\u0026quot;: {\n\t    \u0026quot;babel-core\u0026quot;: \u0026quot;^5.8.9\u0026quot;,\n    \u0026quot;babel-loader\u0026quot;: \u0026quot;^5.3.2\u0026quot;,\n    \u0026quot;bootstrap\u0026quot;: \u0026quot;^3.3.5\u0026quot;,\n    \u0026quot;node-static\u0026quot;: \u0026quot;^0.7.7\u0026quot;,\n    \u0026quot;webpack\u0026quot;: \u0026quot;^1.10.5\u0026quot;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, restart your local server (\u003cem\u003eCtrl + C\u003c/em\u003e and \u003cem\u003enpm start\u003c/em\u003e) and you should see something like this in your terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm start\n\n\u0026gt; notetaker-ractive@1.0.0 start /Users/telemaco/Desarrollo/Node/Librerias/notetaker-ractive\n\u0026gt; webpack -w \u0026amp; node_modules/node-static/bin/cli.js\n\nserving \u0026quot;.\u0026quot; at http://127.0.0.1:8080\nHash: 5fd031eb3af6c5d592e1\nVersion: webpack 1.10.5\nTime: 748ms\n                  Asset     Size  Chunks             Chunk Names\n./dist/js/app-bundle.js  2.43 kB       0  [emitted]  main\n    + 1 hidden modules\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eReload your browser to check that everything is ok.\nThis is what you should see:\n\u003cimg src=\"/content/images/2015/07/ractive-tutorial-02.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eGreat!\u003c/strong\u003e you now have all you need to get into the interesting part of the tutorial.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eYou can check the source code in \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003ethis GitHub repo\u003c/a\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePrevious step: \u003ca href=\"/post/create-a-ractive-application-tutorial\"\u003eIntroduction\u003c/a\u003e\nNext step: \u003ca href=\"/post/ractive-js-tutorial-creating-the-barebones\"\u003eCreating the barebones\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n"},{"slug":"create-a-ractive-application-tutorial","title":"Create a Ractive.js application (0 of 6)","creationDate":"2015-07-26T16:15:37.214Z","keywords":"tutorial, javascript, ractive, ractivejs","status":"published","excerpt":"\u003cp\u003eI'm a big fan of javascript. I like it in the front-end and I love it in the back-end (thanks \u003ca href=\"http://www.quora.com/Who-is-Ryan-Dahl\"\u003eRyan Dhal\u003c/a\u003e).\nAlso I enjoy playing with new libraries and frameworks that pops up every day. It seems nowadays everybody creates a new one and, when the time comes for you to start a new project and select the right one, oh man! it's a tough time.\u003c/p\u003e\n\u003cp\u003eWith the beggining of this year, I was in the position of starting a new big project and I spent some time deciding which libraries we would use in the front-end (no doubts on our back-end: \u003cstrong\u003eNodeJS\u003c/strong\u003e \u003cem\u003eFTW\u003c/em\u003e).\nIt was then when I discovered \u003ca href=\"http://www.ractivejs.org/\"\u003eRactive.JS\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThe more time I spent reading the \u003ca href=\"http://docs.ractivejs.org/latest/get-started\"\u003edocs\u003c/a\u003e and playing with their interactive \u003ca href=\"http://learn.ractivejs.org/hello-world/1/\"\u003edemos\u003c/a\u003e, the more surprised I was I didn't hear anything about this library before.\nIMHO it's a very easy to learn and powerful tool for dealing with DOM automatic bindings, event handling, pub/sub stuff and so on.\u003c/p\u003e\n\u003cp\u003eI began working in a prototype of our project using this tool and I was also surprised about the speed yur can get in terms of development.\nThe way this library solves some common problems is very natural for me, it fits my mindset. And every time I needed to learn how to implement something, it was pretty straightforward to find out.\u003c/p\u003e\n","content":"\u003cp\u003eI'm a big fan of javascript. I like it in the front-end and I love it in the back-end (thanks \u003ca href=\"http://www.quora.com/Who-is-Ryan-Dahl\"\u003eRyan Dhal\u003c/a\u003e).\nAlso I enjoy playing with new libraries and frameworks that pops up every day. It seems nowadays everybody creates a new one and, when the time comes for you to start a new project and select the right one, oh man! it's a tough time.\u003c/p\u003e\n\u003cp\u003eWith the beggining of this year, I was in the position of starting a new big project and I spent some time deciding which libraries we would use in the front-end (no doubts on our back-end: \u003cstrong\u003eNodeJS\u003c/strong\u003e \u003cem\u003eFTW\u003c/em\u003e).\nIt was then when I discovered \u003ca href=\"http://www.ractivejs.org/\"\u003eRactive.JS\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThe more time I spent reading the \u003ca href=\"http://docs.ractivejs.org/latest/get-started\"\u003edocs\u003c/a\u003e and playing with their interactive \u003ca href=\"http://learn.ractivejs.org/hello-world/1/\"\u003edemos\u003c/a\u003e, the more surprised I was I didn't hear anything about this library before.\nIMHO it's a very easy to learn and powerful tool for dealing with DOM automatic bindings, event handling, pub/sub stuff and so on.\u003c/p\u003e\n\u003cp\u003eI began working in a prototype of our project using this tool and I was also surprised about the speed yur can get in terms of development.\nThe way this library solves some common problems is very natural for me, it fits my mindset. And every time I needed to learn how to implement something, it was pretty straightforward to find out.\u003c/p\u003e\n\u003cp\u003eWe finally didn't use \u003cem\u003eRactive.JS\u003c/em\u003e in our project as we found some issues regarding server-side \u003cem\u003ehtml\u003c/em\u003e rendering we couldn't solve (\u003ca href=\"https://github.com/ractivejs/ractive/issues/1648\"\u003emore  info\u003c/a\u003e) and I can tell you it was a hard decision to drop it.\u003c/p\u003e\n\u003cp\u003eAnyway, I'm a big fan of this library and I'm eager to use it in my side projects (couldn't begin any new one this year so far).\u003c/p\u003e\n\u003cp\u003eOn the other hand, I spend the little spare time I have these days following the great tutorials you can find in \u003ca href=\"https://www.egghead.io\"\u003eegghead.io\u003c/a\u003e. Specially, I enjoyed the \u003ca href=\"http://facebook.github.io/react/\"\u003eReactJS\u003c/a\u003e ones.\nThis library has a lot of popularity nowadays and I wanted to know why.\nFrom my point of view, \u003cem\u003eReacjJS\u003c/em\u003e is also a great library and if you combine it with the \u003ca href=\"https://facebook.github.io/flux/docs/overview.html\"\u003eFlux\u003c/a\u003e architecture, it's also a powerful tool for you to build complex systems.\nBut, the more I know about \u003cem\u003eReactJS\u003c/em\u003e the more I wonder why \u003cem\u003eRactive.JS\u003c/em\u003e is not as popular. Of course the latter (built by the bright people at \u003cem\u003eThe Guardian\u003c/em\u003e) does not have \u003cem\u003eFacebook\u003c/em\u003e behind, but from the developer perspective, I think it's at as good as the other one.\u003c/p\u003e\n\u003cp\u003eSo, when I finished the great \u003ca href=\"https://github.com/tylermcginnis/\"\u003eTyler McGinnis\u003c/a\u003e tutorial on \u003ca href=\"https://egghead.io/series/build-your-first-react-js-application\"\u003ehow to build an app with \u003cem\u003eReactJS\u003c/em\u003e\u003c/a\u003e, I was convinced to do the same with \u003cstrong\u003eRactive.JS\u003c/strong\u003e.\u003c/p\u003e\n\u003ch2\u003eTutorial introduction\u003c/h2\u003e\n\u003cp\u003eThe goal of this tutorial is to introuduce you to the world of \u003cem\u003eRactive.JS\u003c/em\u003e. Also, as I've been reading a lot about \u003cem\u003eES2015\u003c/em\u003e (formerly \u003cem\u003eES6\u003c/em\u003e), I will be using the next version of \u003cem\u003eJavascript\u003c/em\u003e thanks to another brilliant tool: the \u003ca href=\"https://babeljs.io/\"\u003eBabel\u003c/a\u003e transpiler.\nThe last tools I will be using is \u003ca href=\"http://webpack.github.io/\"\u003ewebpack\u003c/a\u003e to build all of our front-end assets and \u003ca href=\"https://www.npmjs.com/\"\u003enpm\u003c/a\u003e for dependency management.\nI will also be using a couple of extra libraries apart from \u003cem\u003eReact.JS\u003c/em\u003e I will explain when the time comes.\u003c/p\u003e\n\u003cp\u003eYou can find the final code for this tutorial at \u003ca href=\"https://github.com/PaquitoSoft/notetaker-ractive\"\u003eGitHub\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eSummary\u003c/h2\u003e\n\u003cp\u003eThese are the links for the different steps of the tutorial:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-setting-up-your-environment\"\u003eSetting up your environmet\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-creating-the-barebones\"\u003eCreating the barebones\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-routing\"\u003eRouting\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-loading-user-info\"\u003eLoading user info (GitHub)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-managing-users-notes\"\u003eManaging user's notes (Firebase)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/post/ractive-js-tutorial-the-final-touch\"\u003eThe final touch\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n"},{"slug":"consuming-ga-data-from-nodejs-express-app","title":"Consuming GA data from NodeJS Express app","creationDate":"2013-12-01T21:43:41.405Z","keywords":"nodejs, express, google, analytics, ga, development","status":"published","excerpt":"\u003cp\u003eI didn't have a great time trying to implement a \u003cem\u003esimple\u003c/em\u003e feature involving Google Analytics in one of my projects (nodejs web application).\u003c/p\u003e\n\u003cp\u003eMy humble requirement was to collect some data (events) I was pushing to Google Analytics in order to create a simple report for my users.\nSince it isn't a critical report, my idea was to get the data once a day and cache it.\u003c/p\u003e\n\u003cp\u003eSo, as simple as it seems, it has been a tough trip for me and I want to share the whole process with the community. I hope anyone trying to achive something similar gets to this article and find it helpful.\u003c/p\u003e\n\u003cp\u003eThese are the main steps I had to take:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRegister an application in \u003ca href=\"https://code.google.com/apis/console\"\u003eGoogle API console center\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCreate a service account\u003c/li\u003e\n\u003cli\u003eRegister the newly created service account generated email into the Google Analytics account I wanted to consume\u003c/li\u003e\n\u003cli\u003eImplement the authorization token request (create a \u003cem\u003eJWT\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eImplement the request to collect data from Google Analytics\u003c/li\u003e\n\u003c/ul\u003e\n","content":"\u003cp\u003eI didn't have a great time trying to implement a \u003cem\u003esimple\u003c/em\u003e feature involving Google Analytics in one of my projects (nodejs web application).\u003c/p\u003e\n\u003cp\u003eMy humble requirement was to collect some data (events) I was pushing to Google Analytics in order to create a simple report for my users.\nSince it isn't a critical report, my idea was to get the data once a day and cache it.\u003c/p\u003e\n\u003cp\u003eSo, as simple as it seems, it has been a tough trip for me and I want to share the whole process with the community. I hope anyone trying to achive something similar gets to this article and find it helpful.\u003c/p\u003e\n\u003cp\u003eThese are the main steps I had to take:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRegister an application in \u003ca href=\"https://code.google.com/apis/console\"\u003eGoogle API console center\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCreate a service account\u003c/li\u003e\n\u003cli\u003eRegister the newly created service account generated email into the Google Analytics account I wanted to consume\u003c/li\u003e\n\u003cli\u003eImplement the authorization token request (create a \u003cem\u003eJWT\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eImplement the request to collect data from Google Analytics\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eRegistering an application in Google API console center\u003c/h2\u003e\n\u003cp\u003eFirst of all you need to sign in into \u003ca href=\"https://code.google.com/apis/console\"\u003eGoogle API console center\u003c/a\u003e and register a new project. Once you create it (you just need to fill the project name), you should select the \u003cem\u003eServices\u003c/em\u003e link in the left vertical menu. Here you can set what Google services your project will need access to. So we click on the \u003cem\u003eAnalytics API\u003c/em\u003e switch button to activate this permission.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh3.googleusercontent.com/-H2ECcOC-KTk/UN-DZCZzGSI/AAAAAAAAABY/zY0RlFoWPcI/s912/register_google_api_console.jpg\" alt=\"Register a new application in Google API console\"\u003e\u003c/p\u003e\n\u003ch2\u003eCreate a service account\u003c/h2\u003e\n\u003cp\u003eNext we need to create the service account.\u003cbr\u003e\nIn the left vertical menu you should click in the \u003cem\u003eAPI Access\u003c/em\u003e link. You should see a big blue button saying \u003cem\u003eCreate an OAuth Client ID...\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh6.googleusercontent.com/-g7qvSvt3DPQ/UOasmIB_xzI/AAAAAAAAABo/e400jAuaMtA/s912/create_service_account_1.jpg\" alt=\"Create service account (step 1)\"\u003e\u003c/p\u003e\n\u003cp\u003eClick there and you will be presented a popup to fill some info about the app that will be using the Google service. Fill the project name at least.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh4.googleusercontent.com/-E_3Cq9o3cBk/UOasm4j6JRI/AAAAAAAAABw/-TZqTHHQTY8/s912/create_service_account_2.jpg\" alt=\"Create service account (step 2)\"\u003e\u003c/p\u003e\n\u003cp\u003eNow you will get to a second step (inside the popup) where you need to choose you want to create a \u003cem\u003eservice account\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh4.googleusercontent.com/-Or_U6ntuM7M/UOasoEXN0mI/AAAAAAAAAB0/aD_fJs5IQOI/s912/create_service_account_3.jpg\" alt=\"Create service account (step 3)\"\u003e\u003c/p\u003e\n\u003cp\u003eAfter you click in \u003cem\u003eCreate client ID\u003c/em\u003e button, the popup will show a message stating that public-private key pair has been generated. You will get a password and your private key (the password is for working with the private key).\u003cbr\u003e\nSave the private key file ('.p12' file type) into your hard drive.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh5.googleusercontent.com/-y5XEIRMWwwk/UOaspLNWc6I/AAAAAAAAAB8/zN0mMwz8-fU/s912/create_service_account_4.jpg\" alt=\"Create service account (step 4)\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen you close the popup you will see a new section in the main page (\u003cem\u003eService account\u003c/em\u003e). You need to take not about the \u003cem\u003eEmail address\u003c/em\u003e generated for the service account.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh5.googleusercontent.com/-bfkyPN8zCCU/UOasp-zLG3I/AAAAAAAAACE/NPFq01WJA0k/s912/create_service_account_5.jpg\" alt=\"Create service account (step 5)\"\u003e\u003c/p\u003e\n\u003cp\u003eThere's one important last step you need to take here. Google has given you a private key in a '.p12' file, but you will need a \u003cem\u003e.pem\u003c/em\u003e file in order to sign your JWT.\u003cbr\u003e\nIn order to achieve this step you need to have \u003cem\u003eopenssl\u003c/em\u003e tool installed in your system.\u003cbr\u003e\nOpen a terminal and browse to the folder where you saved the private key. Then type this command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003emy_computer$ openssl pkcs12 -in YOUR_PRIVATE_KEY_FILE.p12 -out demo_certificate.pem -nodes\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter that, you will have a new file in your folder called \u003cem\u003ecertificate.pem\u003c/em\u003e. This is the one we will use later on.\u003c/p\u003e\n\u003ch2\u003eRegister service account in Google Analytics\u003c/h2\u003e\n\u003cp\u003eIn this step you need to grant read access to the brand new service account in your Google analytics project.\u003cbr\u003e\nLog in to \u003ca href=\"http://www.google.com/analytics/\"\u003eGoogle Analytics\u003c/a\u003e and navigate to your project. Enter de \u003cem\u003eAdmin\u003c/em\u003e section and look for the \u003cem\u003eUsers\u003c/em\u003e tab.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh4.googleusercontent.com/-mFT-z5XXZag/UOasq46iNEI/AAAAAAAAACM/lMfqqxqfFYg/s912/grant_service_account_access_to_ga_1.jpg\" alt=\"Grant access to service account in Google Analytics (step 1)\"\u003e\u003c/p\u003e\n\u003cp\u003eClick in the \u003cem\u003eNew User\u003c/em\u003e button and type the email for the service account you previously created. Use the \u003cem\u003eUser\u003c/em\u003e role.\u003cbr\u003e\nIn the \u003cem\u003eprofile\u003c/em\u003e section, select your Analytics project profile and add it to \u003cem\u003eSelected profiles\u003c/em\u003e panel.\u003cbr\u003e\nFinally, push \u003cem\u003eCreate user button\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://lh4.googleusercontent.com/-zhgwYXNEFNc/UOasr9ayMZI/AAAAAAAAACU/Wyl7U__pXkA/s912/grant_service_account_access_to_ga_2.jpg\" alt=\"Grant access to service account in Google Analytics (step 2)\"\u003e\u003c/p\u003e\n\u003cp\u003eThat's it!\u003c/p\u003e\n\u003ch2\u003eImplement authorization request\u003c/h2\u003e\n\u003cp\u003eIn order to access \u003cem\u003eAnalytics\u003c/em\u003e data, we need to get an authorization token first. We will use the email of the brand new service account created and also the private key (\u003cem\u003e.pem\u003c/em\u003e file) to generate a \u003cem\u003eJWT\u003c/em\u003e (JSON Web Token). We will send a \u003cem\u003ePOST\u003c/em\u003e request to Google with this JWT so they answer with an access token.\u003c/p\u003e\n\u003cp\u003eHere is my version of the code implementing JWT generation and request:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar fs = require('fs'),\n    crypto = require('crypto'),\n\trequest = require('request'); // This is an external module (https://github.com/mikeal/request)\n\t\nvar authHeader = {\n\t\t\t'alg': 'RS256',\n\t\t'typ': 'JWT'\n\t},\n\tauthClaimSet = {\n\t\t\t'iss': process.env.GA_SERVICE_ACCOUNT, // Service account email\n\t\t'scope': 'https://www.googleapis.com/auth/analytics.readonly', // We MUST tell them we just want to read data\n\t\t'aud': 'https://accounts.google.com/o/oauth2/token'\n\t},\n\tSIGNATURE_ALGORITHM = 'RSA-SHA256',\n\tSIGNATURE_ENCODE_METHOD = 'base64',\n\tGA_KEY_PATH = 'PATH_TO_YOUR_PRIVATE_KEY.pem',\n\tgaKey;\n\nfunction urlEscape(source) {\n\t\treturn source.replace(/\\\\+/g, '-').replace(/\\\\//g, '_').replace(/\\\\=+$/, '');\n}\n\nfunction base64Encode(obj) {\n\t\tvar encoded = new Buffer(JSON.stringify(obj), 'utf8').toString('base64');\n\treturn urlEscape(encoded);\n}\n\nfunction readPrivateKey() {\n\t\tif (!gaKey) {\n\t\t\tgaKey = fs.readFileSync(GA_KEY_PATH, 'utf8');\n\t}\n\treturn gaKey;\n}\n\nvar authorize = function(callback) {\n\t\n\tvar self = this,\n\t\tnow = parseInt(Date.now() / 1000, 10), // Google wants us to use seconds\n\t\tcipher,\n\t\tsignatureInput,\n\t\tsignatureKey = readPrivateKey(),\n\t\tsignature,\n\t\tjwt;\n\n\t// Setup time values\n\tauthClaimSet.iat = now;\n\tauthClaimSet.exp = now + 60; // Token valid for one minute\n\n\t// Setup JWT source\n\tsignatureInput = base64Encode(authHeader) + '.' + base64Encode(authClaimSet);\n\n\t// Generate JWT\n\tcipher = crypto.createSign('RSA-SHA256');\n\tcipher.update(signatureInput);\n\tsignature = cipher.sign(signatureKey, 'base64');\n\tjwt = signatureInput + '.' + urlEscape(signature);\n\t\n\t// Send request to authorize this application\n\trequest({\n\t\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t},\n\t\turi: 'https://accounts.google.com/o/oauth2/token',\n\t\tbody: 'grant_type=' + escape('urn:ietf:params:oauth:grant-type:jwt-bearer') +\n\t\t\t'\u0026amp;assertion=' + jwt\n\t}, function(error, response, body) {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\tcallback(new Error(error));\n\t\t} else {\n\t\t\t\tvar gaResult = JSON.parse(body);\n\t\t\tif (gaResult.error) {\n\t\t\t\t\tcallback(new Error(gaResult.error));\n\t\t\t} else {\n\t\t\t\t\tcallback(null, gaResult.access_token);\n\t\t\t}\n\t\t}\n\t});\n\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe auth request must have two parameters:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003egrant_type: This is a constant\u003c/li\u003e\n\u003cli\u003eassertion: Generated JWT\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs you can see, JWT is created with three parts:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ea fixed header\u003c/li\u003e\n\u003cli\u003ea claim set: info about what are what do we need the access token for\u003c/li\u003e\n\u003cli\u003ea signature (generated based on the other two)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe \u003cem\u003escope\u003c/em\u003e property of the \u003cem\u003eclaim set\u003c/em\u003e must be set to \u003cem\u003ereadonly\u003c/em\u003e. At least, I couldn't get it work without it, even if I set the service account with an administrator role in my \u003cem\u003eAnalytics\u003c/em\u003e project settings.\u003c/p\u003e\n\u003cp\u003eThe response from \u003cem\u003eGoogle\u003c/em\u003e should be something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n\t\u0026quot;access_token\u0026quot; : \u0026quot;1/8xbJqaOZXSUZbHLl5EOtu1pxz3fmmetKx9W8CV4t79M\u0026quot;,\n\t\u0026quot;token_type\u0026quot;: \u0026quot;Bearer\u0026quot;,\n\t\u0026quot;expires_in\u0026quot;: 3600\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eImplement analytics data request\u003c/h2\u003e\n\u003cp\u003eThe hard part is already done, this is the easy one.\u003cbr\u003e\nNow we only need to make a request to \u003cem\u003eGoogle Analytics\u003c/em\u003e service using our auth token.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar request = require('request'),\n\tqs = require('querystring');\n\t\nauthorize(function(err, token) {\n\tif (!err) {\n\t\t// Query the number of total visits for a month\n\t\tvar requestConfig = {\n\t\t\t\t'ids': 'ga:YOUR_ANALYTICS_PROJECT_PROFILE_ID',\n\t\t\t'start-date': '2012-12-01',\n\t\t\t'end-date': '2012-12-21',\n\t\t\t'dimensions': 'ga:visitors'\n\t\t\t'max-results': '10'\n\t\t};\n\t\t\n\t\trequest({\n\t\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t\t'Authorization': 'Bearer ' + token // Here is where we use the auth token\n\t\t\t},\n\t\t\turi: 'https://www.googleapis.com/analytics/v3/data/ga?' + qs.stringify(requestConfig)\n\t\t}, function(error, resp, body) {\n\t\t\t\tvar data = JSON.parse(body);\n\t\t\tconsole.log(data);\n\t\t});\n\t}\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eReferences:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developers.google.com/accounts/docs/OAuth2ServiceAccount\"\u003eUsing OAuth 2.0 for Server to Server Applications\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.google.com/analytics/devguides/reporting/core/v3/reference\"\u003eGoogle Analytics Core Reporting API - Reference Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://ga-dev-tools.appspot.com/explorer/\"\u003eGoogle Analytics Query Explorer 2\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/berngp/node-green-jwt\"\u003enode-green-jwt\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ncb000gt/node-googleanalytics\"\u003enode-googleanalytics\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://stackoverflow.com/questions/9863509/service-applications-and-google-analytics-api-v3-server-to-server-oauth2-authen\"\u003eStack Overflow 1\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://stackoverflow.com/questions/11529595/is-a-service-account-the-right-credentials-for-querying-google-bigquery-in-node\"\u003eStack Overflow 2\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"}],"_superjson":{"values":{"posts.0.creationDate":["Date"],"posts.1.creationDate":["Date"],"posts.2.creationDate":["Date"],"posts.3.creationDate":["Date"],"posts.4.creationDate":["Date"],"posts.5.creationDate":["Date"],"posts.6.creationDate":["Date"],"posts.7.creationDate":["Date"]}}},"__N_SSG":true},"page":"/","query":{},"buildId":"Dhh1eIxwrKki7CqZexiwV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>